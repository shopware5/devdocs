<!DOCTYPE html><html class="no-js" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>On action tags</title><meta name="description" content="The Shopware HTTP cache is a full page cache - it caches the whole output for a given route such as www.my-shop.example.org/fancy-product.
There are mechan"><meta name="keywords" content="cache, http"><meta name="author" content="Daniel NÃ¶gel"><link rel="author" href="https://developers.shopware.com/blog/authors/dn"><!-- Facebook --><meta property="og:title" content="On action tags"><meta property="og:type" content="article"><meta property="og:image" content=""><meta property="og:url" content="/blog/2016/07/11/on-action-tags"><meta property="og:description" content="The Shopware HTTP cache is a full page cache - it caches the whole output for a given route such as www.my-shop.example.org/fancy-product.
There are mechan"><!-- Twitter --><meta name="twitter:card" content="summary"><meta name="twitter:title" content="On action tags"><meta name="twitter:description" content="The Shopware HTTP cache is a full page cache - it caches the whole output for a given route such as www.my-shop.example.org/fancy-product.
There are mechan"><meta name="twitter:image" content=""><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><meta name="theme-color" content="#26556f"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:700,600,400" type="text/css"><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/styles/github-gist.min.css"><link rel="stylesheet" href="https://developers.shopware.com/assets/css/docsearch.min.1515505350.css"><link rel="stylesheet" href="https://developers.shopware.com/assets/css/basic.1515505350.css" media="screen"><link rel="alternate" type="application/atom+xml" href="https://developers.shopware.com/blog/atom.xml" title="Shopware Developer blog feed"></head><body>
<div class="wrapper">

    <header class="header--main"><a href="https://developers.shopware.com/" class="offcanvas--trigger" title="Navigation">
            <i class="icon-list"></i>
        </a>

        <a href="https://developers.shopware.com/" title="Shopware Developer Documentation" class="logo">
            <img src="https://developers.shopware.com/assets/img/shopware_developers_logo_white.1515505350.svg"></a>

    </header><div id="searchBox">
        <form action="#" method="get" id="search-form">
            <input type="text" id="search-query" name="q" placeholder="Search" autocomplete="off"><button id="search-action"></button>
        </form>
    </div>

    <nav class="navi--main" data-offcanvas="true"><div class="navi--content">
            <ul class="navi--tree"><li class="navi--chapter">
                    <a href="/developers-guide/" class="navi--link has--children">
                       Developer Guides
                    </a>

                                        <ul class="navi--sub-tree is--bulleted"><li class="navi--sub-chapter">

                            <a class="navi--link has--children" href="/plugin-guide/">
                                Developing plugins
                            </a>

                                                            <ul class="navi--sub-tree is--numbered"><li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/plugin-quick-start/">
                                                Quick start guide
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/example-plugin/">
                                                Storefront extension
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/controller/">
                                                Controllers
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/models/">
                                                Models
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/event-guide/">
                                                Events
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/services/">
                                                Services
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/plugin-configuration/">
                                                Plugin configuration
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/plugin-testing/">
                                                Plugin testing
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/plugin-license/">
                                                Plugin License
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/shopware-5-plugin-update-guide/">
                                                Plugin update guide
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/plugin-extension-by-plugin/">
                                                Extend an existing plugin
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/legacy-plugin-system/">
                                                The legacy Plugin System
                                            </a>
                                        </li>
                                                                    </ul></li>
                                                <li class="navi--sub-chapter">

                            <a class="navi--link has--children" href="/developers-guide/general-resources/">
                                General Resources
                            </a>

                                                            <ul class="navi--sub-tree is--bulleted"><li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/cheat-sheet/">
                                                Cheat-Sheet
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/phpstorm/">
                                                Setting up PhpStorm
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/shopware-5-upgrade-guide-for-developers/">
                                                Upgrade Guide
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/shopware-5-performance-for-devs/">
                                                Performance Guide
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/debugging/">
                                                Debugging Shopware
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/coding-standards/">
                                                Coding Standards
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/elasticsearch/">
                                                Elasticsearch
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/shopware-config/">
                                                config.php settings
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/blog/2015/06/09/understanding-the-shopware-hook-system/">
                                                Hooks
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/blog/2015/08/11/the-shopware-seo-engine/">
                                                SEO Engine
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/shopware-5-media-service/">
                                                MediaService
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/http-cache/">
                                                HTTP Cache
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/address-management-guide/">
                                                Address Management
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/attribute-system/">
                                                Attributes
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/csrf-protection/">
                                                CSRF Protection
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/dic-tags/">
                                                Dependency Injection Tags
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/shopware-5-cli-commands/">
                                                CLI commands
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/implementing-your-own-captcha/">
                                                Captcha
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/shopware-5-search-bundle/">
                                                SearchBundle
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/shopware-5-core-service-extensions/">
                                                Service extensions
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/entity-relationship-model/">
                                                Entity relationship model
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/password-encoder/">
                                                Password encoder
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/global-variables-in-templates/">
                                                Global variables in templates
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/media-optimizer/">
                                                Media Optimizer
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/customer-streams-extension/">
                                                Customer - Search &amp; Streams
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/product-export/">
                                                Product exports
                                            </a>
                                        </li>
                                                                    </ul></li>
                                                <li class="navi--sub-chapter">

                            <a class="navi--link has--children" href="/developers-guide/tutorials/">
                                Tutorials
                            </a>

                                                            <ul class="navi--sub-tree is--bulleted"><li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/custom-shopping-world-elements/">
                                                Create custom shopping worlds elements
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/digital-publishing-elements/">
                                                Create custom digital publishing elements
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/emotion-preset-plugin/">
                                                Create custom emotion preset plugin
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/plugin-lastregistrations-widget/">
                                                Create your own backend widget
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/payment-plugin/">
                                                Create custom payment plugin
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/plugin-slugify/">
                                                Create custom url slugger
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/risk-rules/">
                                                Risk Rules
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/vagrant-phpstorm/">
                                                Vagrant and PHPStorm
                                            </a>
                                        </li>
                                                                    </ul></li>
                                                <li class="navi--sub-chapter">

                            <a class="navi--link has--children" href="/developers-guide/backend-and-extjs/">
                                Backend and ExtJS
                            </a>

                                                            <ul class="navi--sub-tree is--bulleted"><li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/backend-extension/">
                                                Extending the backend
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/backend-components/basics/">
                                                Basics
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/backend-components/listing/">
                                                Listing
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/backend-components/detail/">
                                                Detail
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/backend-components/associations/">
                                                Associations
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/backend-components/listing-extensions/">
                                                Listing extensions
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/backend-components/batch-processes/">
                                                Batch processes
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/lightweight-backend-modules/">
                                                Lightweight backend modules
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/backend-icons/">
                                                Backend icon set
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/backend-escaping/">
                                                Backend escaping
                                            </a>
                                        </li>
                                                                    </ul></li>
                                                <li class="navi--sub-chapter">

                            <a class="navi--link has--children" href="/developers-guide/rest/">
                                REST API
                            </a>

                                                            <ul class="navi--sub-tree is--bulleted"><li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/">
                                                REST API Basics
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/examples/article/">
                                                The article resource
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/examples/customer/">
                                                The customer resource
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/examples/order/">
                                                The order resource
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/examples/translation/">
                                                The translation resource
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/examples/category/">
                                                The category resource
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/examples/media/">
                                                The media resource
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/examples/merge-mode/">
                                                The merge mode
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/examples/cache/">
                                                The cache resources
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/examples/batch/">
                                                The batch mode
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/api-resource-user/">
                                                The user resource
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/customer-streams/">
                                                Customer Streams
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/examples/filter/">
                                                Filter
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/examples/payment/">
                                                Payment
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/models/">
                                                Models
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/plugin-api-extension/">
                                                Create your own endpoint
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/extend-api-resource/">
                                                Extend a REST API resource
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/faq/">
                                                REST API FAQ
                                            </a>
                                        </li>
                                                                    </ul></li>
                                            </ul></li>

                
                <li class="navi--chapter">
                    <a href="/designers-guide/" class="navi--link has--children">
                       Frontend Guides
                    </a>

                                        <ul class="navi--sub-tree is--bulleted"><li class="navi--sub-chapter">

                            <a class="navi--link has--children" href="/theme-guide/">
                                Developing Themes
                            </a>

                                                            <ul class="navi--sub-tree is--numbered"><li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/theme-startup-guide/">
                                                Theme Startup Guide
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/getting-started/">
                                                Getting started with templating
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/smarty/">
                                                Getting started with Smarty
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/less/">
                                                Getting started with LESS
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/css-and-js-files-usage/">
                                                Using CSS and JavaScript
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/responsive-theme-default-components/">
                                                Using the theme default components
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/javascript-statemanager-and-pluginbase/">
                                                jQuery plugins &amp; the StateManager
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/configuration-using-theme-php/">
                                                Custom theme configuration
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/preparing-themes-for-the-community-store/">
                                                Preparing themes for the community store
                                            </a>
                                        </li>
                                                                    </ul></li>
                                                <li class="navi--sub-chapter">

                            <a class="navi--link has--children" href="/designers-guide/general-resources/">
                                General Resources
                            </a>

                                                            <ul class="navi--sub-tree is--bulleted"><li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/eslint-for-plugins/">
                                                ESLint for plugins
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/javascript-coding-style/">
                                                Javascript Coding Style
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/styletile/">
                                                UI Components
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/snippets/">
                                                Snippet Management
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/datepicker/">
                                                Datepicker
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/external-resources/">
                                                Embedding external resources
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/responsive-images/">
                                                Responsive images
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/smarty-plugins/">
                                                Smarty Plugins
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/best-practice-theme-development/">
                                                Using the Grunt watcher
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/modify-jquery-plugins/">
                                                Modify jQuery plugins
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/managing-third-party-dependencies-with-bower/">
                                                Managing dependencies with Bower
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/managing-third-party-dependencies-with-npm/">
                                                Managing dependencies with NPM
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/legacy-template-development-in-shopware-5/">
                                                Legacy template development
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/how-to-use-karma/">
                                                Testing with Karma
                                            </a>
                                        </li>
                                                                    </ul></li>
                                                <li class="navi--sub-chapter">

                            <a class="navi--link has--children" href="/designers-guide/tutorials/">
                                Tutorials
                            </a>

                                                            <ul class="navi--sub-tree is--bulleted"><li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/find-smarty-blocks/">
                                                How to find smarty blocks
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/custom-templates/">
                                                Adding custom templates
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/custom-listing-page/">
                                                Example: Custom listing page
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/custom-detail-page/">
                                                Example: Custom Detail page
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/edit-newsletter-and-document-templates/">
                                                Edit newsletter and document templates
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/google-pagespeed-best-practise/">
                                                Google PageSpeed
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/browser-notice/">
                                                Outdated browser notification
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/range-slider-algorithm/">
                                                Range slider algorithm
                                            </a>
                                        </li>
                                                                    </ul></li>
                                            </ul></li>

                
                <li class="navi--chapter">
                    <a href="/community/" class="navi--link has--children">
                       Community
                    </a>

                                        <ul class="navi--sub-tree is--bulleted"><li class="navi--sub-chapter">

                            <a class="navi--link" href="/community/gitter/">
                                Gitter
                            </a>

                                                    </li>
                                                <li class="navi--sub-chapter">

                            <a class="navi--link" href="/community/contribution-guideline/">
                                Contribution Guideline
                            </a>

                                                    </li>
                                                <li class="navi--sub-chapter">

                            <a class="navi--link" href="/community/contributing-code/">
                                Contributing Code
                            </a>

                                                    </li>
                                                <li class="navi--sub-chapter">

                            <a class="navi--link" href="/community/irc/">
                                IRC Channel
                            </a>

                                                    </li>
                                            </ul></li>

                
                <li class="navi--chapter">
                    <a href="/labs/" class="navi--link has--children">
                       Labs
                    </a>

                                        <ul class="navi--sub-tree is--bulleted"><li class="navi--sub-chapter">

                            <a class="navi--link" href="/labs/3d-product-visualization/">
                                3D Product visualization
                            </a>

                                                    </li>
                                                <li class="navi--sub-chapter">

                            <a class="navi--link" href="/labs/shopping-cart-and-ordering-processes/">
                                Shopping Cart &amp; ordering processes
                            </a>

                                                    </li>
                                                <li class="navi--sub-chapter">

                            <a class="navi--link" href="/labs/new-administration/">
                                New administration
                            </a>

                                                    </li>
                                                <li class="navi--sub-chapter">

                            <a class="navi--link" href="/labs/internationalization/">
                                Internationalization
                            </a>

                                                    </li>
                                                <li class="navi--sub-chapter">

                            <a class="navi--link" href="/labs/api/">
                                API
                            </a>

                                                    </li>
                                                <li class="navi--sub-chapter">

                            <a class="navi--link" href="/labs/housekeeping/">
                                Housekeeping
                            </a>

                                                    </li>
                                            </ul></li>

                
                <li class="navi--chapter">
                    <a href="/sysadmins-guide/" class="navi--link has--children">
                       System Guides
                    </a>

                                        <ul class="navi--sub-tree"><li class="navi--sub-chapter">

                            <a class="navi--link" href="/sysadmins-guide/system-requirements/">
                                System requirements
                            </a>

                                                    </li>
                                                <li class="navi--sub-chapter">

                            <a class="navi--link" href="/sysadmins-guide/installation-guide/">
                                Installation Guide
                            </a>

                                                    </li>
                                                <li class="navi--sub-chapter">

                            <a class="navi--link" href="/sysadmins-guide/update-guide/">
                                Update Guide
                            </a>

                                                    </li>
                                                <li class="navi--sub-chapter">

                            <a class="navi--link" href="/sysadmins-guide/shopware-5-performance-for-sysadmins/">
                                Performance Guide
                            </a>

                                                    </li>
                                                <li class="navi--sub-chapter">

                            <a class="navi--link" href="/sysadmins-guide/elasticsearch-setup/">
                                Elasticsearch setup
                            </a>

                                                    </li>
                                                <li class="navi--sub-chapter">

                            <a class="navi--link" href="/sysadmins-guide/varnish-setup/">
                                Varnish setup
                            </a>

                                                    </li>
                                                <li class="navi--sub-chapter">

                            <a class="navi--link" href="/sysadmins-guide/sessions/">
                                Sessions
                            </a>

                                                    </li>
                                                <li class="navi--sub-chapter">

                            <a class="navi--link" href="/sysadmins-guide/shopware-cluster-setup/">
                                Cluster setup
                            </a>

                                                    </li>
                                            </ul></li>

                
                <li class="navi--chapter">
                    <a href="/blog/" class="navi--link">
                       Blog
                    </a>

                                    </li>

                            </ul></div>
    </nav><div class="devdocs content">

        <section id="search-results" style="display: none;"><h2 class="search-results--headline" id="search-results">Search results</h2>

            <div class="entries"></div>
        </section><div class="inner-container">

            <div class="info">

                
                                <a class="edit-on-github" href="https://github.com/shopware/devdocs/blob/master/source/blog/_posts/2016-07-11-on-action-tags.md" target="_blank"><i class="icon-github"></i> Edit this page on GitHub</a>
                
            </div>

                        <h1>
                On action tags
            </h1>
            
            <article class="blog-post"><div class="blog-authors">
                        <div class="blog-user-info">
    <div class="blog-avatar">
        <img src="https://developers.shopware.com/blog/img/authors/author_dn.jpg" width="50" height="50"></div>
    <div class="blog-user">
        <div class="user-info">
            <a rel="author" href="https://developers.shopware.com/blog/authors/dn">Daniel NÃ¶gel</a>
            <span class="user-title">, Developer</span>        </div>

        <div class="release">
            <span class="icon icon-clock"></span> July 11th, 2016
        </div>

        <div class="user-services">

                            <span class="user-service">
                    <a href="https://twitter.com/danielnoegel" target="_blank" title="Twitter Daniel NÃ¶gel">
                        <span class="service-desc">Twitter: </span> <i class="icon icon-twitter"></i>
                    </a>
                </span>
            
                            <span class="user-service">
                    <a href="https://danielnoegel.de" target="_blank" title="Website Daniel NÃ¶gel">
                        <span class="service-desc">Website: </span> <i class="icon icon-globe"></i>
                    </a>
                </span>
            
                            <span class="user-service">
                    <a href="https://github.com/dnoegel/" target="_blank" title="Github Daniel NÃ¶gel">
                        <span class="service-desc">Github: </span> <i class="icon icon-github"></i>
                    </a>
                </span>
                    </div>
    </div>
</div>
                    </div>
    
    <div class="blog-detail-text">
        <p>The Shopware HTTP cache is a full page cache - it caches the whole output for a given route such as <code>www.my-shop.example.org/fancy-product</code>.
There are mechanisms, however, to modify this behaviour by providing <a href="/developers-guide/http-cache/#live-caching">e.g. cache cookies or no-cache tags</a>.
An additional mechanisms are the so called <a href="/developers-guide/http-cache/#action-tag">action tags</a>. This blog post will discuss the technical
background of the action tags - and the way they are handled in various scenarios.</p>

<h2 id="the-action-tag">The action tag</h2>

<p>The <code>{action}</code> tag is a Smarty tag, that can be used to call other routes from within a page. Consider this example:</p>

<pre><code>&lt;h1&gt;Welcome to {$shopName}&lt;/h1&gt;

&lt;p&gt;These are the products you recently purchased:
    {action controller=user action=recentlyPurchased}
&lt;p&gt;
</code></pre>

<p>In this example there is a HTML template, which will greet a user and show his recently purchased products. Generally
this whole page could be cached: The <code>{$shopName}</code> Smarty variable will be the same for all users, so it has no implications
for caching. The list of recently purchased products, however, is heavily user dependent - it cannot be the same for every
user, therefore it cannot be cached generally.</p>

<p>One way to solve this kind of issue, is to include a <code>{action}</code> tag. It will force Shopware to internally call another
route and render that output into the HTML template. This way the surrounding HTML template can be cached for all
users and just the recent products are fetched from the system.</p>

<p>Oversimplified one could say, the action tag works like an iframe - it will show a separate page into another page. Of
course no iframes are used here - there are more sophisticated mechanisms for those kind of problems.</p>

<h2 id="how-action-tags-are-handled">How action tags are handled</h2>

<p>The handling of the action tag differs depending on if your are using the HTTP cache and which HTTP cache you are using.</p>

<h3 id="without-caching">Without caching</h3>

<p>If Shopware is used without the HTTP cache, the Shopware's default implementation of the action tag will take effect.
It can be found in <code>engine/Library/Enlight/Template/Plugins/function.action.php</code>. In here Shopware will create
a separate request / response object and pass it to the <a href="/blog/2015/08/26/bootstrapping-shopware-the-dispatch-loop/#dispatcher">dispatcher</a>.</p>

<p>The dispatcher will then handle the request and dispatch it to the corresponding controller - in the example above
the controller <code>user</code> with the action <code>recentlyPurchased</code> is affected. This controller will handle the request as every
other controller, render a template and assign that to the response body. The action block will then just return that
response, so it can be rendered into the calling page.</p>

<p>In other words: If no caching is used, Shopware is able to handle action tags in the very same call then the main request.
The DI container and all instantiated services can be reused and there is no additional overhead by HTTP requests.
Even though action tags are handled very efficiently, the overall system response time will suffer from the fact, that
every single requests needs to be handled by the server as there is no caching involved.</p>

<h3 id="with-shopware's-built-in-http-cache">With Shopware's built in HTTP cache</h3>

<p>If you enable the Shopware HTTP cache (e.g. in production mode), Shopware will use the Symfony reverse proxy by default.
The Shopware HTTP cache will then replace the default action plugin with another implementation in <code>\Shopware_Plugins_Core_HttpCache_Bootstrap::registerEsiRenderer</code>.
This implementation will not resolve subrequests directly but render an so called ESI tag instead. The action tag
<code>{action controller=user action=recentlyPurchased}</code> will then become <code>&lt;esi:include src=&quot;user/recentlyPurchased&quot; alt=&quot;&quot; onerror=&quot;continue&quot;/&gt;</code>
This will instruct the HTTP cache (in this case the symfony reverse proxy) to perform an additional request to Shopware
and render the result of that request into the template.</p>

<p>However, the Symfony reverse proxy is still able to handle those requests without re-booting the whole Shopware stack:
The first request actually hitting the Shopware stack (cache miss) will boot up the Shopware Kernel and all relevant
dependencies such as DI container, plugin system and required services. Every ESI request can then be handled in this
stack. In <code>\Shopware\Kernel::handle</code> this looks like this:</p>

<pre><code>$request = $this-&gt;transformSymfonyRequestToEnlightRequest($request);

if ($front-&gt;Request() === null) {
    $front-&gt;setRequest($request);
    $response = $front-&gt;dispatch();
} else {
    $dispatcher = clone $front-&gt;Dispatcher();
    $response   = clone $front-&gt;Response();

    $response-&gt;clearHeaders()
        -&gt;clearRawHeaders()
        -&gt;clearBody();

    $response-&gt;setHttpResponseCode(200);
    $request-&gt;setDispatched(true);
    $dispatcher-&gt;dispatch($request, $response);
}

$response = $this-&gt;transformEnlightResponseToSymfonyResponse($response);

return $response;
</code></pre>

<p>If there was no request before, the main request is handled in the first branch; if this is a subsequent request (e.g.
an ESI request), those requests will be handled in the second branch similar to the way subrequests are handled
by the default action tag implementation (see above).</p>

<p>You can even see this mechanism in the cached files: Searching for <code>surrogate-&gt;handle</code> in the cache folder will bring
up results such as</p>

<pre><code>&lt;?php echo $this-&gt;surrogate-&gt;handle($this, '/?module=frontend&amp;controller=user&amp;action=productsPurchased', '', false) ?&gt;
</code></pre>

<p>These snippets will forward the request to the Shopware kernel and render the result to the response. For that reason
Shopware without any cache and Shopware with the Symfony reverse proxy are both able to handle action tags without booting
the Shopware kernel multiple times.</p>

<h3 id="with-varnish">With Varnish</h3>

<p>The last variant is to use Shopware with an external cache capable of handing ESI tags such as <a href="/sysadmins-guide/varnish-setup/">varnish</a>.
Generally this works the same way as the variant with the builtin HTTP cache: Shopware will replace the action tags
with ESI tags - and the cache will take care of requesting those parts of the page separately.
However, as external caches cannot access the Shopware stack directly, every cold ESI request will result in a full
call to the Shopware stack.</p>

<p>When ESI tags are handled sequentially (e.g. when using varnish), every ESI to cold pages (cache miss) will slow down
the overall return time of the page. So even if the main page is a cache hit, calls to cold ESI routes might have
an impact on the response time.</p>

<h2 id="slow-esi-tags">Slow ESI tags</h2>

<p>Let's consider a page like this:</p>

<pre><code>&lt;body&gt;
    &lt;h1&gt;My fancy homepage&lt;/h1&gt;
    &lt;esi:include src=&quot;/test/firstEsi&quot;/&gt;
    &lt;esi:include src=&quot;/test/secondEsi&quot;/&gt;
    &lt;esi:include src=&quot;/test/thirdEsi&quot;/&gt;
&lt;/body&gt;
</code></pre>

<p>The page itself is cachable and includes three ESI tags.</p>

<p><img class="is-float-left" style="width:40%;" src="/blog/img/esi_download.png">
This image shows a call to a page using varnish: The TTFB (time to first byte) is 86ms, so the cache
is able to deliver an answer after 86ms. The "Content Download", however, take a lot longer. In this case the slow content download
does not indicate a bandwith issue - it is varnish asking the appserver to resolve ESI tags. In this example, every
ESI call does take one second.</p>

<p>So after 86ms the cache started delivering the (cached) page. After delivering some parts of the HTTP code, however,
the cache encounters an ESI tag. If that route is not cached, yet, varnish will need to wait for the appserver to process
that request - in this case one second. After the appserver returned the result, the cache is able to continue delivering
the original page with the result of the ESI call inside. Then it will encounter the second and third ESI tags, and will
need to look those two up as well one after the other.
That's the reason, why the browser indicates a slow &quot;content download&quot;:
After the initial response started after a few milliseconds, the rest of the response was slowed down by the uncached ESI tags.</p>

<p><img alt="shopping carts" class="is-float-right" style="width:60%;" src="/blog/img/esi_animation.gif"></p>

<p>Generally this behaviour is the same for varnish caching and Shopware's builtin cache. However: Due to the fact, that
the builtin cache does not need to boot the Shopware kernel for every single ESI tag, a page with many uncached ESI
routed might profit from using the builtin cache. On the other hand, varnish is way faster in returning cached pages -
so this is highly dependent on the number of (uncached) ESI tags.</p>

<p>It's also important to notice, that older versions of varnish are only able to fetch ESI tags sequentially (one after another).
So if 3 cold ESI tags needs to be fetched with 1000ms each as in the example above, this will take 3000ms in total. This
is illustrated in the animated image: Loading the page is interrupted three times for a second when the ESi tags are resolved.
So even if ESI tags are great for having parts of the page cached with varying cache times -
looking up multiple uncached ESI tags might have quite some performance implications.</p>

<p>Generally we recommend to <em>reduce the number of ESI tags</em> as far as possible in high performance setups. If ESI tags
are inevitable, make sure that they <em>are cached as well</em> or that they are <em>not used &quot;above the fold&quot;</em>.</p>

<h2 id="ajax-esi">Ajax ESI</h2>

<p>Some time ago, I was wondering, if we couldn't just handle ESI tags with Ajax queries. As those queries could be handled
all at once, we might be able to handle 3 queries with 1000ms each in (theoretically) 1000ms - instead of 3000 as in the example before.</p>

<p>The proof of concept plugin I wrote will basically subscribe to PostDsipatch events and remote the &quot;Surrogate-Control&quot;
header. This way, caches will ignore the ESI tags and deliver those tags to the client. A simple jQuery plugin will then
find those tags and perform the ESI request via Ajax:</p>

<pre><code>$.plugin('ajaxEsi', {

    init: function () {
        var me = this;

        me.applyDataAttributes();

        $('esi\\:include').each(function (i, d) {
            me.loadSingleEsi($(d).attr('src'), function (data) {
                $(d).replaceWith(data);
                window.StateManager.updatePlugin('select:not([data-no-fancy-select=&quot;true&quot;])', 'swSelectboxReplacement');
            });
        });

    },

    loadSingleEsi: function (url, callback) {
        $.ajax({
            url: url
        }).done(function (data) {
            callback(data);
        });
    },

    destroy: function () {
        var me = this;

        me.$el.removeClass(me.opts.activeCls);

        me._destroy();
    }
});
(function ($) {

    $('body').ajaxEsi();

})(jQuery);
</code></pre>

<p>As you can see, all elements matching <code>esi\\:include</code> are searched. In the <code>src</code> attribute there is the URL we want
to call using Ajax, e.g. <code>http://my-shop.example.org/user/recentlyPurchased</code>. The result of those Ajax-Queries
is then simply placed into the DOM using <code>$(d).replaceWith(data);</code>.</p>

<p>This approach will still require Shopware to run the Stack for each single ESI tag - but the requests are performed
simultaneously and the main request is not slowed down any more by ESI requests.</p>

<h2 id="one-step-further:-batch-requests">One step further: Batch requests</h2>

<p>In the <code>multi-esi</code> branch of the plugin, I also evaluated another solution: Theoretically you can collect all
ESI tags first and then write a custom controller, that will process all ESI URLs at once. This way, we never need more
than one request to the Shopware stack for all ESI tags.</p>

<p>There are two downsides of this approach, however:</p>

<ol><li>This approach will require a custom controller, that is able to dispatch multiple URLs. This is doable - but increases
the complexity of the system.</li>
<li>When multiple ESI tags are requested in one HTTP request, the handling of the cache time also becomes more complex:
You will need to figure out the lowest common cache time of all routes and set that for the request. But if the overal
cache time is defined by the lowest cache time - what is the point in having varying cache times in the first place?</li>
</ol><p>So even though this approach looks promising on a first glance, I assume that it would introduce too much complexity to
solve a problem that should better be handled in your application's logic: If you need e.g. many ESI requests for prices
or instock info, having a distinct Ajax requests that will fetch this info in one Ajax call is a way better solutions then
to introduce the &quot;batch request&quot; ESI handling discussed here.</p>

<h2 id="conclusion">Conclusion</h2>

<p>ESI tags will allow you to handle pages with multiple, separately cached sections in an easy manner. You should be aware,
however, that (uncached) ESI tags are handled in a different way in different situations:</p>

<ul><li>No cache: Subrequests within the main request, no additional kernel boots</li>
<li>Symfony reverse proxy: Within stack, at most one additional kernel boot</li>
<li>Varnish or other external caches: One full Shopware stack for each ESI tag</li>
</ul><p>Furthermore you should be aware, that ESI tags are usually handled in a synchronous manner - so if you have many uncached
ESI requests, the page will be slower by the sum of all ESI tags.</p>

<p>For that reason, ESI tags should usually be cached as well - they are not the ideal solution to present many live sections
within a cached page - but a good solutions for a page with many different cache sections. Requesting ESI tags with the
&quot;AjaxESI&quot; plugin discussed above will allow you, to fetch multiple ESI tags at once - but it will still require Shopware
to boot the kernel for any single ESI request.</p>

<p>Depending on the use case, there are other alternatives such as <a href="https://en.wikipedia.org/wiki/WebSocket">web sockets</a>
or techniques like <a href="https://www.facebook.com/note.php?note_id=389414033919">bigpipe</a> that also try to minimize the
number of requests needed to populate a page with customized content.</p>

    </div>

    <a href="https://developers.shopware.com/blog/" title="Back to overview" class="btn btn-default">Back to overview</a>

    <div class="clearfix"></div>
</article></div>

        <div class="clearfix"></div>
    </div>
    
    <!-- Footer -->
            <footer class="main-footer"><div class="footer--container">
                <div class="copyright">2018 Â© shopware AG - All rights reserved</div>
                <div class="footer--links">
                    <a href="https://en.shopware.com/legal-notice" target="_blank" title="Imprint">Imprint</a> |
                    <a href="https://en.shopware.com/gtc" target="_blank" title="Terms and Conditions">Terms and Conditions</a>
                </div>
            </div>
        </footer></div>

<script src="//cdn.jsdelivr.net/jquery/2.1.4/jquery.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/highlight.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/languages/less.min.js"></script><script src="https://developers.shopware.com/assets/js/anchor.min.1515505350.js"></script><script src="https://developers.shopware.com/assets/js/jquery.expandCode.1515505350.js"></script><script src="https://developers.shopware.com/assets/js/jquery.toc.1515505350.js"></script><script src="https://developers.shopware.com/assets/js/jquery.offcanvas.1515505350.js"></script><script src="https://developers.shopware.com/assets/js/app.1515505350.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script><!-- Google Tag Manager --><noscript>
    <iframe src="//www.googletagmanager.com/ns.html?id=GTM-5ZGXBG" height="0" width="0" style="display:none;visibility:hidden"></iframe>
</noscript>
<script>(function (w, d, s, l, i) {
    w[l] = w[l] || [];
    w[l].push({
        'gtm.start': new Date().getTime(), event: 'gtm.js'
    });
    var f = d.getElementsByTagName(s)[0],
            j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : '';
    j.async = true;
    j.src =
            '//www.googletagmanager.com/gtm.js?id=' + i + dl;
    f.parentNode.insertBefore(j, f);
})(window, document, 'script', 'dataLayer', 'GTM-5ZGXBG');</script><!-- End Google Tag Manager --></body></html>