<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Dynamic shopping worlds</title>

    <meta name="description" content="The shopping worlds (also called emotions) are one of the central content pages in Shopware. With them, even non-technical
persons can create landing pages">
<meta name="keywords" content="reusable, template, dynamic, shopping world, emotion">

        <meta name="author" content="Daniel NÃ¶gel">
    <link rel="author" href="https://developers.shopware.com/blog/authors/dn">
    
<!-- Facebook -->
<meta property="og:title" content="Dynamic shopping worlds">
<meta property="og:type" content="article">
<meta property="og:image" content="">
<meta property="og:url" content="/blog/2015/11/18/dynamic-shopping-worlds/">
<meta property="og:description" content="The shopping worlds (also called emotions) are one of the central content pages in Shopware. With them, even non-technical
persons can create landing pages">

<!-- Twitter -->
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Dynamic shopping worlds">
<meta name="twitter:description" content="The shopping worlds (also called emotions) are one of the central content pages in Shopware. With them, even non-technical
persons can create landing pages">
<meta name="twitter:image" content="">

    
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#26556f">

    <link rel="stylesheet" href="https://developers.shopware.com/assets/css/open-sans-font.css?v=1633502525">
    <link rel="stylesheet" href="https://developers.shopware.com/assets/css/highlight-github-gist.min.css?v=1633502525">
    <link rel="stylesheet" href="https://developers.shopware.com/assets/css/docsearch.min.css?v=1633502525">
    <link rel="stylesheet" href="https://developers.shopware.com/assets/css/basic.css?v=1633502525" media="screen">

    <link rel="apple-touch-icon" sizes="57x57" href="https://developers.shopware.com/assets/favicons/apple-icon-57x57.png?v=1633502525">
    <link rel="apple-touch-icon" sizes="60x60" href="https://developers.shopware.com/assets/favicons/apple-icon-60x60.png?v=1633502525">
    <link rel="apple-touch-icon" sizes="72x72" href="https://developers.shopware.com/assets/favicons/apple-icon-72x72.png?v=1633502525">
    <link rel="apple-touch-icon" sizes="76x76" href="https://developers.shopware.com/assets/favicons/apple-icon-76x76.png?v=1633502525">
    <link rel="apple-touch-icon" sizes="114x114" href="https://developers.shopware.com/assets/favicons/apple-icon-114x114.png?v=1633502525">
    <link rel="apple-touch-icon" sizes="120x120" href="https://developers.shopware.com/assets/favicons/apple-icon-120x120.png?v=1633502525">
    <link rel="apple-touch-icon" sizes="144x144" href="https://developers.shopware.com/assets/favicons/apple-icon-144x144.png?v=1633502525">
    <link rel="apple-touch-icon" sizes="152x152" href="https://developers.shopware.com/assets/favicons/apple-icon-152x152.png?v=1633502525">
    <link rel="apple-touch-icon" sizes="180x180" href="https://developers.shopware.com/assets/favicons/apple-icon-180x180.png?v=1633502525">
    <link rel="apple-touch-icon-precomposed" href="https://developers.shopware.com/assets/favicons/apple-icon-precomposed.png?v=1633502525">
    <link rel="icon" type="image/png" sizes="192x192" href="https://developers.shopware.com/assets/favicons/android-icon-192x192.png?v=1633502525">
    <link rel="icon" type="image/png" sizes="32x32" href="https://developers.shopware.com/assets/favicons/favicon-32x32.png?v=1633502525">
    <link rel="icon" type="image/png" sizes="96x96" href="https://developers.shopware.com/assets/favicons/favicon-96x96.png?v=1633502525">
    <link rel="icon" type="image/png" sizes="16x16" href="https://developers.shopware.com/assets/favicons/favicon-16x16.png?v=1633502525">
    <link rel="shortcut icon" href="https://developers.shopware.com/assets/favicons/favicon.ico?v=1633502525">

    <link rel="alternate" type="application/atom+xml" href="https://developers.shopware.com/blog/atom.xml" title="Shopware Developer blog feed">
</head>

<body>
<div class="wrapper">

    <header class="header--main">

        <a href="https://developers.shopware.com/" class="offcanvas--trigger" title="Navigation">
            <i class="icon-list"></i>
        </a>

        <a href="https://developers.shopware.com/" title="Shopware Developer Documentation" class="logo">
            <img src="https://developers.shopware.com/assets/img/shopware_developers_logo_white.svg?v=1633502525">
        </a>

    </header>

    <div id="searchBox">
        <form action="#" method="get" id="search-form">
            <input type="text" id="search-query" name="q" placeholder="Search" autocomplete="off">
            <button id="search-action"></button>
        </form>
    </div>

    <nav class="navi--main" data-offcanvas="true">
        <div class="navi--content">
            <ul class="navi--tree">
                <li class="navi--chapter is--active">
                    <a href="/" class="navi--link has--children">
                        Shopware 5
                    </a>
                    <ul class="navi--sub-1-tree">
                        
                        <li class="navi--sub-1-chapter">
                            <a href="/developers-guide/" class="navi--link has--children">
                                Developer Guides
                            </a>

                                                        <ul class="navi--sub-2-tree is--bulleted">
                                                                <li class="navi--sub-2-chapter">

                                    <a class="navi--link has--children" href="/plugin-guide/">
                                        Developing plugins
                                    </a>

                                                                        <ul class="navi--sub-3-tree is--numbered">

                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/plugin-quick-start/">
                                                Quick Startup Guide
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/example-plugin/">
                                                Example plugin
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/controller/">
                                                Controllers
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/models/">
                                                Models
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/plugin-guidelines/">
                                                Plugin guidelines
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/event-guide/">
                                                Events
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/event-list/">
                                                Event list
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/services/">
                                                Services
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/plugin-configuration/">
                                                Plugin configuration
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/plugin-testing/">
                                                Plugin testing
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/plugin-license/">
                                                Plugin License
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/shopware-5-plugin-update-guide/">
                                                Plugin update guide
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/plugin-extension-by-plugin/">
                                                Extend an existing plugin
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/legacy-plugin-system/">
                                                The legacy Plugin System
                                            </a>
                                        </li>
                                                                            </ul>
                                                                    </li>
                                                                <li class="navi--sub-2-chapter">

                                    <a class="navi--link has--children" href="/developers-guide/general-resources/">
                                        General Resources
                                    </a>

                                                                        <ul class="navi--sub-3-tree is--bulleted">

                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/cheat-sheet/">
                                                Cheat-Sheet
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/phpstorm/">
                                                Setting up PhpStorm
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/shopware-5-upgrade-guide-for-developers/">
                                                Upgrade Guide
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/shopware-5-performance-for-devs/">
                                                Performance Guide
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/coding-standards/">
                                                Coding Standards
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/shopware-composer/">
                                                Using composer with Shopware
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/debugging/">
                                                Debugging Shopware
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/elasticsearch/">
                                                Elasticsearch
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/shopware-config/">
                                                config.php settings
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/blog/2015/06/09/understanding-the-shopware-hook-system/">
                                                Hooks
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/blog/2015/08/11/the-shopware-seo-engine/">
                                                SEO Engine
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/shopware-5-media-service/">
                                                MediaService
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/address-management-guide/">
                                                Address Management
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/http-cache/">
                                                HTTP Cache
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/attribute-system/">
                                                Attributes
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/content-types/">
                                                Content-Types
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/csrf-protection/">
                                                CSRF Protection
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/dic-tags/">
                                                Dependency Injection Tags
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/shopware-5-cli-commands/">
                                                CLI commands
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/implementing-your-own-captcha/">
                                                Captcha
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/shopware-5-search-bundle/">
                                                SearchBundle
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/shopware-5-core-service-extensions/">
                                                Service extensions
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/entity-relationship-model/">
                                                Entity relationship model
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/password-encoder/">
                                                Password encoder
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/global-variables-in-templates/">
                                                Global variables in templates
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/media-optimizer/">
                                                Media Optimizer
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/cookie-consent-manager/">
                                                Register a cookie to the cookie consent manager
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/customer-streams-extension/">
                                                Customer - Search &amp; Streams
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/product-export/">
                                                Product exports
                                            </a>
                                        </li>
                                                                            </ul>
                                                                    </li>
                                                                <li class="navi--sub-2-chapter">

                                    <a class="navi--link has--children" href="/developers-guide/tutorials/">
                                        Tutorials
                                    </a>

                                                                        <ul class="navi--sub-3-tree is--bulleted">

                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/custom-shopping-world-elements/">
                                                Create custom shopping worlds elements
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/digital-publishing-elements/">
                                                Create custom digital publishing elements
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/emotion-preset-plugin/">
                                                Create custom emotion preset plugin
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/plugin-lastregistrations-widget/">
                                                Create your own backend widget
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/payment-plugin/">
                                                Create custom payment plugin
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/plugin-slugify/">
                                                Create custom url slugger
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/risk-rules/">
                                                Risk Rules
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/vagrant-phpstorm/">
                                                Vagrant and PHPStorm
                                            </a>
                                        </li>
                                                                            </ul>
                                                                    </li>
                                                                <li class="navi--sub-2-chapter">

                                    <a class="navi--link has--children" href="/developers-guide/backend-and-extjs/">
                                        Backend and ExtJS
                                    </a>

                                                                        <ul class="navi--sub-3-tree is--bulleted">

                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/backend-extension/">
                                                Extending the backend
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/backend-components/basics/">
                                                Basics
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/backend-components/listing/">
                                                Listing
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/backend-components/detail/">
                                                Detail
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/backend-components/associations/">
                                                Associations
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/backend-components/listing-extensions/">
                                                Listing extensions
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/backend-components/batch-processes/">
                                                Batch processes
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/backend-statistics-extension/">
                                                Statistics extension
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/lightweight-backend-modules/">
                                                Lightweight backend modules
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/backend-icons/">
                                                Backend icon set
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/backend-escaping/">
                                                Backend escaping
                                            </a>
                                        </li>
                                                                            </ul>
                                                                    </li>
                                                                <li class="navi--sub-2-chapter">

                                    <a class="navi--link has--children" href="/developers-guide/rest/">
                                        REST API
                                    </a>

                                                                        <ul class="navi--sub-3-tree is--bulleted">

                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/">
                                                REST API Basics
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/examples/article/">
                                                The article resource
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/examples/customer/">
                                                The customer resource
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/examples/order/">
                                                The order resource
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/examples/translation/">
                                                The translation resource
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/examples/category/">
                                                The category resource
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/examples/media/">
                                                The media resource
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/examples/merge-mode/">
                                                The merge mode
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/examples/cache/">
                                                The cache resources
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/examples/batch/">
                                                The batch mode
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/examples/filter/">
                                                Filter
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/customer-streams/">
                                                Customer Streams
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/api-resource-user/">
                                                The user resource
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/examples/payment/">
                                                Payment
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/models/">
                                                Models
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/plugin-api-extension/">
                                                Create your own endpoint
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/extend-api-resource/">
                                                Extend a REST API resource
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/faq/">
                                                REST API FAQ
                                            </a>
                                        </li>
                                                                            </ul>
                                                                    </li>
                                                            </ul>
                                                    </li>

                        
                        <li class="navi--sub-1-chapter">
                            <a href="/designers-guide/" class="navi--link has--children">
                                Frontend Guides
                            </a>

                                                        <ul class="navi--sub-2-tree is--bulleted">
                                                                <li class="navi--sub-2-chapter">

                                    <a class="navi--link has--children" href="/theme-guide/">
                                        Developing Themes
                                    </a>

                                                                        <ul class="navi--sub-3-tree is--numbered">

                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/theme-startup-guide/">
                                                Theme Startup Guide
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/getting-started/">
                                                Getting started with templating
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/smarty/">
                                                Getting started with Smarty
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/less/">
                                                Getting started with LESS
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/css-and-js-files-usage/">
                                                Using CSS and JavaScript
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/responsive-theme-default-components/">
                                                Using the theme default components
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/javascript-statemanager-and-pluginbase/">
                                                jQuery plugins &amp; the StateManager
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/configuration-using-theme-php/">
                                                Custom theme configuration
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/preparing-themes-for-the-community-store/">
                                                Preparing themes for the Community Store
                                            </a>
                                        </li>
                                                                            </ul>
                                                                    </li>
                                                                <li class="navi--sub-2-chapter">

                                    <a class="navi--link has--children" href="/designers-guide/general-resources/">
                                        General Resources
                                    </a>

                                                                        <ul class="navi--sub-3-tree is--bulleted">

                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/eslint-for-plugins/">
                                                ESLint for plugins
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/javascript-coding-style/">
                                                Javascript Coding Style
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/styletile/">
                                                UI Components
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/snippets/">
                                                Snippet Management
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/datepicker/">
                                                Datepicker
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/responsive-images/">
                                                Responsive images
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/external-resources/">
                                                Embedding external resources
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/smarty-plugins/">
                                                Smarty Plugins
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/best-practice-theme-development/">
                                                Using the Grunt watcher
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/modify-jquery-plugins/">
                                                Modify jQuery plugins
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/managing-third-party-dependencies-with-bower/">
                                                Managing dependencies with Bower
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/managing-third-party-dependencies-with-npm/">
                                                Managing dependencies with NPM
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/legacy-template-development-in-shopware-5/">
                                                Legacy template development
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/how-to-use-karma/">
                                                Testing with Karma
                                            </a>
                                        </li>
                                                                            </ul>
                                                                    </li>
                                                                <li class="navi--sub-2-chapter">

                                    <a class="navi--link has--children" href="/designers-guide/tutorials/">
                                        Tutorials
                                    </a>

                                                                        <ul class="navi--sub-3-tree is--bulleted">

                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/find-smarty-blocks/">
                                                How to find smarty blocks
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/custom-templates/">
                                                Adding custom templates
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/custom-listing-page/">
                                                Example: Custom listing page
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/custom-detail-page/">
                                                Example: Custom Detail page
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/edit-newsletter-and-document-templates/">
                                                Edit newsletter and document templates
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/google-pagespeed-best-practise/">
                                                Google PageSpeed
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/browser-notice/">
                                                Outdated browser notification
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/range-slider-algorithm/">
                                                Range slider algorithm
                                            </a>
                                        </li>
                                                                            </ul>
                                                                    </li>
                                                            </ul>
                                                    </li>

                        
                        <li class="navi--sub-1-chapter">
                            <a href="/community/" class="navi--link has--children">
                                Community
                            </a>

                                                        <ul class="navi--sub-2-tree is--bulleted">
                                                                <li class="navi--sub-2-chapter">

                                    <a class="navi--link" href="/community/contribution-guideline/">
                                        Contribution Guideline
                                    </a>

                                                                    </li>
                                                                <li class="navi--sub-2-chapter">

                                    <a class="navi--link" href="/community/contributing-code/">
                                        Contributing Code
                                    </a>

                                                                    </li>
                                                            </ul>
                                                    </li>

                        
                        <li class="navi--sub-1-chapter">
                            <a href="/sysadmins-guide/" class="navi--link has--children">
                                System Guides
                            </a>

                                                        <ul class="navi--sub-2-tree">
                                                                <li class="navi--sub-2-chapter">

                                    <a class="navi--link" href="/sysadmins-guide/system-requirements/">
                                        System requirements
                                    </a>

                                                                    </li>
                                                                <li class="navi--sub-2-chapter">

                                    <a class="navi--link" href="/sysadmins-guide/installation-guide/">
                                        Installation Guide
                                    </a>

                                                                    </li>
                                                                <li class="navi--sub-2-chapter">

                                    <a class="navi--link" href="/sysadmins-guide/update-guide/">
                                        Update Guide
                                    </a>

                                                                    </li>
                                                                <li class="navi--sub-2-chapter">

                                    <a class="navi--link" href="/sysadmins-guide/professional-deployments/">
                                        Professional Deployments
                                    </a>

                                                                    </li>
                                                                <li class="navi--sub-2-chapter">

                                    <a class="navi--link" href="/sysadmins-guide/shopware-5-performance-for-sysadmins/">
                                        Performance Guide
                                    </a>

                                                                    </li>
                                                                <li class="navi--sub-2-chapter">

                                    <a class="navi--link" href="/sysadmins-guide/elasticsearch-setup/">
                                        Elasticsearch setup
                                    </a>

                                                                    </li>
                                                                <li class="navi--sub-2-chapter">

                                    <a class="navi--link" href="/sysadmins-guide/varnish-setup/">
                                        Varnish setup
                                    </a>

                                                                    </li>
                                                                <li class="navi--sub-2-chapter">

                                    <a class="navi--link" href="/sysadmins-guide/sessions/">
                                        Sessions
                                    </a>

                                                                    </li>
                                                                <li class="navi--sub-2-chapter">

                                    <a class="navi--link" href="/sysadmins-guide/shopware-cluster-setup/">
                                        Cluster setup
                                    </a>

                                                                    </li>
                                                            </ul>
                                                    </li>

                        
                        <li class="navi--sub-1-chapter">
                            <a href="/labs/" class="navi--link has--children">
                                Labs
                            </a>

                                                        <ul class="navi--sub-2-tree is--bulleted">
                                                                <li class="navi--sub-2-chapter">

                                    <a class="navi--link" href="/labs/3d-product-visualization/">
                                        3D Product visualization
                                    </a>

                                                                    </li>
                                                            </ul>
                                                    </li>

                        
                        <li class="navi--sub-1-chapter">
                            <a href="/blog/" class="navi--link">
                                Blog
                            </a>

                                                    </li>

                                            </ul>
                </li>
            </ul>
            <ul class="navi--tree">
                <li class="navi--chapter">
                    <a href="https://docs.shopware.com/en/shopware-platform-dev-en" class="navi--link">
                        <span>
                            Shopware 6
                        </span>
                        <span>
                            <i class="icon-external-link"></i>
                        </span>
                    </a>
                </li>
            </ul>
            <ul class="navi--tree">
                <li class="navi--chapter navi--backlink-mobile">
                    <a href="https://en.shopware.com" class="navi--link"><i class="icon--arrow-left"></i> Back to shopware.com</a>
                </li>
                <li class="navi--backlink">
                    <a href="https://en.shopware.com"><i class="icon--arrow-left"></i>Back to shopware.com</a>
                </li>
            </ul>
        </div>
    </nav>

        <div class="devdocs content">

        <section id="search-results" style="display: none;">
            <h2 class="search-results--headline" id="search-results">Search results</h2>

            <div class="entries"></div>
        </section>

        <div class="inner-container">

            <div class="info">

                
                                <a class="edit-on-github" href="https://github.com/shopware/devdocs/blob/master/source/blog/_posts/2015-11-18-dynamic-shopping-worlds.md" target="_blank"><i class="icon-github"></i> Edit this page on GitHub</a>
                
            </div>

                        <h1>
                Dynamic shopping worlds
            </h1>
            
            <article class="blog-post">

        <div class="blog-authors">
                        <div class="blog-user-info">
    <div class="blog-avatar">
        <img src="https://developers.shopware.com/blog/img/authors/author_dn.jpg" width="50" height="50">
    </div>
    <div class="blog-user">
        <div class="user-info">
            <a rel="author" href="https://developers.shopware.com/blog/authors/dn">Daniel NÃ¶gel</a>
            <span class="user-title">, Developer</span>        </div>

        <div class="release">
            <span class="icon icon-clock"></span> November 18th, 2015
        </div>

        <div class="user-services">

                            <span class="user-service">
                    <a href="https://twitter.com/danielnoegel" target="_blank" title="Twitter Daniel NÃ¶gel">
                        <span class="service-desc">Twitter: </span> <i class="icon icon-twitter"></i>
                    </a>
                </span>
            
                            <span class="user-service">
                    <a href="https://danielnoegel.de" target="_blank" title="Website Daniel NÃ¶gel">
                        <span class="service-desc">Website: </span> <i class="icon icon-globe"></i>
                    </a>
                </span>
            
                            <span class="user-service">
                    <a href="https://github.com/dnoegel/" target="_blank" title="Github Daniel NÃ¶gel">
                        <span class="service-desc">Github: </span> <i class="icon icon-github"></i>
                    </a>
                </span>
                    </div>
    </div>
</div>
                    </div>
    
    <div class="blog-detail-text">
        <p>The shopping worlds (also called emotions) are one of the central content pages in Shopware. With them, even non-technical
persons can create landing pages, product, category or blog teasers and many other content types. In addition to that
there is the easy to use editor, powerful components and extensibility, of course.</p>

<p>There are cases, however, where you might want to use the shopping worlds for other kind of content pages - or where you
don't want to create one shopping world per page - but one &quot;template&quot; shopping world, that is dynamically populated.
The following blog post will discuss this exact scenario.</p>

<div class="toc-list" data-depth="3"></div>

<h2 id="the-goal">The goal</h2>

<p><img src="/blog/img/dynamic_backend.png" alt="" width="350" class="is-float-left">
In my example there will be a new "store manager" <strong>backend module</strong>. It will allow the user to define stores (name, description,
address, opening times). In addition to that, the "store manager" will allow the user to edit a shopping world template -
which is used for all stores. So the user can arrange name, description, google map and opening times.</p>

<p>In order not to bloat the shopping world module, the &quot;store template&quot; shopping world should not be visible there. Same
applies to our store shopping world components: they should only be visible in the store manager - not in the default
shopping world module.</p>

<p><img src="/blog/img/dynamic_frontend.png" alt="" width="350" class="is-float-left">
On the image on the left you can see the <strong>frontend result</strong>. It is a simple store page, which shows some details for a given
store - in this example name, description, google map and opening times can be seen.</p>

<p>The marked blocks are completely independent. By modifying the &quot;store template&quot; shopping world, the user can easily
move those boxes around.</p>

<p><img src="/blog/img/dynamic_template.png" alt="" width="350" class="is-float-right">
The backend module is a simple CRUD module, that allows the user to create / edit stores. In our case stores in Berlin,
SchÃ¶ppingen and MÃ¼nster have been defined.  As the Shopware backend components were used, this module is quite simple to
create - the only special thing is the "edit store template" button in the list window. This will open up the <strong>template
shopping world</strong> that defines the layout for all stores. As mentioned before, this specific shopping world can only
be opened from the "store manager" module, the highlights components will also only be visible there.</p>

<h2 id="tasks">Tasks</h2>

<p>Looking at the goal, the plugin can roughly be split into the following tasks:</p>

<ul>
<li>Shopping world
<ul>
<li>Create a &quot;store template&quot; shopping world</li>
<li>Create new shopping world components, that can be filled dynamically (e.g. description, map, opening times)</li>
<li>hide those components and the &quot;store template&quot; from the default shopping world module</li>
</ul>
</li>
<li>Frontend
<ul>
<li>new &quot;store&quot; controller</li>
<li>store selector template (combobox)</li>
<li>include the &quot;store template&quot; shopping world for the current store</li>
<li>wiring up the custom shopping world component</li>
</ul>
</li>
<li>Store manager backend module
<ul>
<li>CRUD for store infos</li>
<li>add &quot;open store template&quot; button, which opens the store template shopping world</li>
</ul>
</li>
</ul>

<p>I will quickly show the more interesting parts of this plugin - if you want to have the full example, please see the
download section below.</p>

<h2 id="shopping-world">Shopping world</h2>

<h3 id="create-a-&quot;store-template&quot;-shopping-world-during-plugin-install">Create a &quot;store template&quot; shopping world during plugin install</h3>

<p>The store template shopping world can easily be created using the <code>Emotion</code> Doctrine model. The only special thing is the
attribute <code>swagShopTemplate</code> that I use to tell my &quot;store template&quot; apart from all the other shopping worlds.</p>

<pre><code>Shopware()-&gt;Models()-&gt;addAttribute(
    's_emotion_attributes',
    'swag',
    'shop_template',
    'INT(1)'
);
Shopware()-&gt;Models()-&gt;generateAttributeModels(
    [
        's_emotion_attributes'
    ]
);
</code></pre>

<h3 id="shopping-world-components">Shopping world components</h3>

<p>As the shopping world components are intended to be dynamic, there is not much configuration needed:</p>

<pre><code>private function createMyEmotionComponent()
{
    $descriptionComponent = $this-&gt;bootstrap-&gt;createEmotionComponent(
        array(
            'name' =&gt; 'Description',
            'template' =&gt; 'component_description',
            'cls' =&gt; 'dynamic_emotion_description',
            'description' =&gt; 'Shop description - will show the shop\'s description'
        )
    );
    $openInfoComponent = $this-&gt;bootstrap-&gt;createEmotionComponent(
        array(
            'name' =&gt; 'Opening times',
            'template' =&gt; 'component_opening',
            'cls' =&gt; 'dynamic_emotion_opening_times',
            'description' =&gt; 'Shop opening times'
        )
    );
    $mapComponent = $this-&gt;bootstrap-&gt;createEmotionComponent(
        [
            'name' =&gt; 'Map',
            'template' =&gt; 'component_map',
            'cls' =&gt; 'dynamic_emotion_map',
            'description' =&gt; 'Shop a google map link'
        ]
    );
    $mapComponent-&gt;createNumberField(
        [
            'name' =&gt; 'zoom',
            'defaultValue' =&gt; '17',
            'minValue' =&gt; 1,
            'maxValue' =&gt; 21,
            'position' =&gt; 1
        ]
    );


    return [$openInfoComponent, $mapComponent, $descriptionComponent];

}

</code></pre>

<p>As you can see, this create the components <code>description</code>, <code>opening times</code> and <code>map</code>. Only the <code>map</code> components has a
configuration field - for the zoom factor. The rest of the data will be read dynamically depending on the current store
selection.</p>

<h3 id="hide-all-this-from-the-shopping-world-module">Hide all this from the shopping world module</h3>

<p>In order not to bloat the shopping world module, my &quot;store template&quot; and the &quot;store components&quot; should not be seen in
the default module.</p>

<p>To do so, a simple subscriber is implemented:</p>

<pre><code>
{
    public static function getSubscribedEvents()
    {
        return array(
            'Enlight_Controller_Action_PostDispatchSecure_Backend_Emotion' =&gt; 'modifyEmotionModule',
            'Shopware\Models\Emotion\Repository::getListingQuery::after' =&gt; 'removeStoreTemplateEmotionFromListing'
        );
    }

    // do not show the store template shopping world in the emotion module
    public function removeStoreTemplateEmotionFromListing(\Enlight_Hook_HookArgs $args)
    {
        $builder = $args-&gt;getReturn();

        $builder-&gt;leftJoin('emotions', 's_emotion_attributes', 'attribute', 'attribute.emotionID = emotions.id')
            -&gt;andWhere('attribute.swag_shop_template IS NULL or attribute.swag_shop_template != 1');

        return $builder;

    }

    public function modifyEmotionModule(\Enlight_Event_EventArgs $args)
    {
        /** @var $controller \Enlight_Controller_Action */
        $controller = $args-&gt;get('subject');
        $request = $controller-&gt;Request();
        $view = $controller-&gt;View();

        // remove our components from the default emotion library
        // our components should just be visible when editing our store emotion template
        if ($request-&gt;getActionName() == 'library' &amp;&amp; !$request-&gt;has('showStoreComponents')) {
            /** @var CustomComponents $customComponents */
            $customComponents = $controller-&gt;get('swag_dynamic_emotion.custom_components');

            $data = $view-&gt;getAssign('data');
            foreach ($data as $key =&gt; $component) {
                // remove the custom elements from the default emotion module
                if ($customComponents-&gt;isCustomComponents($component['cls'])) {
                    unset($data[$key]);
                }
            }
            $view-&gt;assign('data', $data);
        }

    }
}
</code></pre>

<p>The method <code>removeStoreTemplateEmotionFromListing</code> will check for a custom attribute the plugin created. This attribute
is <code>1</code> for the store template shopping world, so only shopping worlds without this flag are shown.
The method <code>modifyEmotionModule</code> modifies the <code>libraryAction</code> of the backend emotion controller - this method will
return all available components for the toolbar on the right of the emotion designer. As our dynamic components
should not be visible there, they are hidden by default using a simple service called <code>swag_dynamic_emotion.custom_components</code>.
This services basically &quot;knows&quot; all emotion components of this plugin - and allows checking, if a given component
is one of the plugin's components.</p>

<h2 id="frontend">Frontend</h2>

<h3 id="store-controller">Store controller</h3>

<p>The store controller and the associated frontend template is quite simple:</p>

<pre><code>
class Shopware_Controllers_Frontend_Store extends Enlight_Controller_Action
{
    public function indexAction()
    {
        /** @var Repository $repo */
        $repo = Shopware()-&gt;Models()-&gt;getRepository('Shopware\CustomModels\SwagDynamicEmotion\Store');
        $stores = $repo-&gt;findAll();

        // all stores
        $this-&gt;View()-&gt;assign('stores', $stores);

        // curent store or null
        $this-&gt;View()-&gt;assign(
            'currentStore',
            $this-&gt;Request()-&gt;getParam('store', empty($stores) ? null : $stores[0]-&gt;getId())
        );

        // store template emotion id
        $this-&gt;View()-&gt;assign('storeEmotionId', $repo-&gt;getStoreEmotionId());
    }
}
</code></pre>

<p>The controller will basically read all stores from the database and assign them to the template. Additionally it
checks for the parameter <code>store</code> (which is the currently selected store) and assigns it to the variable <code>currentStore</code>.
Last of all, it assigns the id of the store template shopping world to the template, so it can be included there.
In this example, Doctrine ORM is used and all store entities are fetched. Depending on the number of entities and
the server load, pagination and perhaps custom SQL queries might be more suitable for your.</p>

<h3 id="the-template">The template</h3>

<p>The only frontend template needed can be found in <code>SwagDynamicEmotion/Views/frontend/store/index.tpl</code>.</p>

<pre><code>{extends file=&quot;parent:frontend/index/index.tpl&quot;}

{* Hide the left navigation bar*}
{block name='frontend_index_content_left'}
{/block}

{block name='frontend_index_content'}
    &lt;div class=&quot;content content--home&quot;&gt;


        &lt;form&gt;
            &lt;select name=&quot;store&quot; id=&quot;storeSelector&quot; onchange=&quot;this.form.submit()&quot;&gt;
                {foreach from=$stores item=store}
                    &lt;option value=&quot;{$store-&gt;getId()}&quot; {if $currentStore eq $store-&gt;getId()}selected=&quot;selected&quot;{/if}&gt;{$store-&gt;getName()}&lt;/option&gt;
                {/foreach}
            &lt;/select&gt;
        &lt;/form&gt;

        &lt;br&gt;
        &lt;div class=&quot;content--emotions&quot;&gt;
            {action controller=Emotion module=Widgets emotionId={$storeEmotionId} currentStore={$currentStore}}
        &lt;/div&gt;
    &lt;/div&gt;
{/block}
</code></pre>

<p>It hides the left navigation menu (<code>frontend_index_content_left</code>) and shows a store selector select box - no rocket
science. The only interesting part here is the inclusion of the store template shopping world:</p>

<pre><code>{action controller=Emotion module=Widgets emotionId={$storeEmotionId} currentStore={$currentStore}}
</code></pre>

<p>It uses the two parameters <code>$storeEmotionId</code> (which identifies the shopping world to show)
and <code>$currentStore</code> (which will later be used to populate the shopping world with the correct store data).
Both have been assigned in the controller before.</p>

<h3 id="wiring-up-the-custom-shopping-world-component">Wiring up the custom shopping world component</h3>

<p>In order to support our new, custom emotion components and fill them dynamically with the current store's content, we will
need to subscribe to the <code>Shopware_Controllers_Widgets_Emotion_AddElement</code> event, which is useful to provide data
for custom components:</p>

<pre><code>class Emotion implements \Enlight\Event\SubscriberInterface
{
    public static function getSubscribedEvents()
    {
        return array(
            'Shopware_Controllers_Widgets_Emotion_AddElement' =&gt; 'handleElement',
            // â¦ the other events we discussed before
        );
    }

    public function removeShopTemplateEmotionFromListing(\Enlight_Hook_HookArgs $args) { }

    public function modifyEmotionModule(\Enlight_Event_EventArgs $args) { }

    /**
     * handle the custom emotion components and provide the current store's content
     *
     * @param \Enlight_Event_EventArgs $args
     * @return array|mixed
     */
    public function handleElement(\Enlight_Event_EventArgs $args)
    {
        /** @var $controller \Enlight_Controller_Action */
        $controller = $args-&gt;get('subject');
        /** @var CustomComponents $customComponents */
        $customComponents = $controller-&gt;get('swag_dynamic_emotion.custom_components');

        $element = $args-&gt;get('element');
        $data = $args-&gt;getReturn();
        $storeId = $controller-&gt;Request()-&gt;getParam('currentStore');

        // just modify our own components
        if (!$customComponents-&gt;isCustomComponents($element['component']['cls'])) {
            return $data;
        }

        // if no $storeId is available (e.g. shopping world preview), get a fallback
        $storeId = isset($storeId) ? $storeId : Shopware()-&gt;Db()-&gt;fetchOne('SELECT id FROM swag_store LIMIT 1');

        // if still not available (e.g. no stores) - return
        if (!$storeId) {
            return $data;
        }

        /** @var ModelRepository $storeRepo */
        $storeRepo = Shopware()-&gt;Models()-&gt;getRepository('Shopware\CustomModels\SwagDynamicEmotion\Store');
        return array_merge($data, ['store' =&gt; $storeRepo-&gt;find($storeId)]);
    }

}
</code></pre>

<p>As you can see, the service <code>swag_dynamic_emotion.custom_components</code> is used here again, to tell apart the default
components from our own ones. If no storeId is available (e.g. for the store listing page or the emotion preview
in the backend) a default is used:</p>

<pre><code>$storeId = isset($storeId) ? $storeId : Shopware()-&gt;Db()-&gt;fetchOne('SELECT id FROM swag_store LIMIT 1');
</code></pre>

<p>Then, finally, we return all the data for our component:</p>

<pre><code>/** @var ModelRepository $storeRepo */
$storeRepo = Shopware()-&gt;Models()-&gt;getRepository('Shopware\CustomModels\SwagDynamicEmotion\Store');
return array_merge($data, ['store' =&gt; $storeRepo-&gt;find($storeId)]);
</code></pre>

<p>Merging the result array is necessary, as <code>$data</code> might contain the components data, e.g. <code>zoom</code> for the map component.
We add the current store's data to it, so both are available in the emotion template.</p>

<h2 id="store-manager-backend-module">Store manager backend module</h2>

<p>The store manager backend module was created using Shopware's <a href="/developers-guide/backend-components/basics/">backend components</a>
and generated using the <a href="/blog/2015/09/01/generating-plugins-with-the-cli-tools/">code generator</a>.
So there is nothing special here - except the &quot;edit store template&quot; button, which is supposed to open the template
shopping world directly.</p>

<h3 id="open-store-template-shopping-world">Open store template shopping world</h3>

<p>In order to add this functionality, we need to modify the <code>swag_store/view/list/list.js</code> file of our backend:</p>

<pre><code>Ext.define('Shopware.apps.SwagStore.view.list.List', {
    extend: 'Shopware.grid.Panel',
    alias: 'widget.swag-store-listing-grid',
    region: 'center',

    configure: function () {
        return {
            detailWindow: 'Shopware.apps.SwagStore.view.detail.Window',
            columns: {
                name: undefined,
                address: undefined
            }
        };
    },

    createToolbarItems: function () {
        var me = this,
            items = me.callParent(arguments);

        items.splice(3, 0, Ext.create('Ext.button.Button', {
            text: 'Edit store template',
            handler: function () {
                Shopware.app.Application.addSubApplication({
                    name: 'Shopware.apps.Emotion',
                    params: {
                        // the ID has been assigned in our backend controller
                        emotionId: '{$storeTemplateEmotionId}'
                    }
                })
            }
        }));
        items.splice(4, 0, '-&gt;');

        return items;
    }
});
</code></pre>

<p>As you can see above, the function <code>createToolbarItems</code> is an override of the base class <code>Shopware.grid.Panel</code>.
The override is used to add the new button. The <code>handler</code> callback of the button will just open the emotion detail
view for the provided <code>emotionId</code>. The ID <code>{$storeTemplateEmotionId}</code> will be filled by Smarty. In order to do so, I
extended the backend controller like this:</p>

<pre><code>public function loadAction()
{
    parent::loadAction();
    /** @var Repository $repo */
    $repo = Shopware()-&gt;Models()-&gt;getRepository('Shopware\CustomModels\SwagDynamicEmotion\Store');
    // this will make our emotion id available in the (smarty) template of our backend application
    $this-&gt;View()-&gt;assign('storeTemplateEmotionId', $repo-&gt;getStoreEmotionId());
}
</code></pre>

<p>This pattern is usually discouraged in Shopware, as the templates are cached and side effects might occur. In this case,
however, the emotionId will be constant, so we can use it in this case. In order to query more dynamic information, models
or <code>Ext.Ajax</code> queries would be required.</p>

<h3 id="modifications-to-the-shopping-world-module">Modifications to the shopping world module</h3>

<p>The shopping world module is not able to open shopping world detail pages by default. As such, it needs to be extended
as well. In order to do so, I created the template file <code>backend/swag_emotion/controller/main.js</code>, which will extend the
main controller of the shopping world module:</p>

<pre><code>//{block name=&quot;backend/emotion/controller/main&quot;}
// {$smarty.block.parent}
Ext.define('Shopware.apps.SwagEmotion.controller.Main', {
    override: 'Shopware.apps.Emotion.controller.Main',

    init: function() {
        var me = this;

        me.callParent(arguments);

        if (me.subApplication.params &amp;&amp; me.subApplication.params.emotionId &gt; 0) {
            me.mainWindow.hide();
            me.getStore('Library').getProxy().extraParams.showStoreComponents = true;
            me.getController('Detail').loadEmotionRecord(me.subApplication.params.emotionId, function(record) {
                me.getController('Detail').openDetailWindow(record);
            });
        }
    }
});
//{/block}
</code></pre>

<p>This is an <code>Ext</code> override, that will modify the constructor of the controller. After calling the original method,
we add a check for a passed <code>emotionId</code>. If it was passed, the main shopping world listing window is hidden using
<code>me.mainWindow.hide();</code>. We also add the flag <code>showStoreComponents</code> to the library store, so that our custom components
will be shown in the designer (<a href="#hide-all-this-from-the-shopping-">see our modification to the libraryAction</a>).
Then finally we will open the detail page for the given <code>emotionId</code> using the call</p>

<pre><code>me.getController('Detail').loadEmotionRecord(me.subApplication.params.emotionId, function(record) {
    me.getController('Detail').openDetailWindow(record);
});
</code></pre>

<h2 id="round-up">Round up</h2>

<p>With the modifications described above, we created a custom content designer that makes use of the shopping world module
without bloating the original module. This will allow the users to use the powerful shopping world designer for custom
content pages in a very convenient way.
In addition to that, we wrote &quot;dynamic&quot; shopping world components, that will be filled depending on the currently selected
store. This way of using the shopping worlds makes them even more powerful.</p>

<h2 id="download">Download</h2>

<p>I didn't go into detail about some smaller modifications and classes the plugin implements. For the full example, please
<a href="/exampleplugins/SwagDynamicEmotion.zip">download the plugin</a>.</p>

    </div>

    <a href="https://developers.shopware.com/blog/" title="Back to overview" class="btn btn-default">Back to overview</a>

    <div class="clearfix"></div>
</article>

                    </div>

        <div class="clearfix"></div>
        <a href="#0" class="dev-top">Top</a>
    </div>
    

    <!-- Footer -->
            <footer class="main-footer">
            <div class="footer--container">
                <div class="copyright">2021 Â© shopware AG - All rights reserved</div>
                <div class="footer--links">
                    <a href="https://en.shopware.com/legal-notice" target="_blank" title="Imprint">Imprint</a> |
                    <a href="https://en.shopware.com/gtc" target="_blank" title="Terms and Conditions">Terms and Conditions</a> |
                    <a id="show-consent" href="#" title="Cookie settings">Cookie settings</a>
                </div>
            </div>
        </footer>
    </div>

<script src="https://developers.shopware.com/assets/js/jquery.min.js?v=1633502525"></script>
<script src="https://developers.shopware.com/assets/js/highlight.min.js?v=1633502525"></script>
<script src="https://developers.shopware.com/assets/js/highlight-lang-less.min.js?v=1633502525"></script>
<script src="https://developers.shopware.com/assets/js/anchor.min.js?v=1633502525"></script>
<script src="https://developers.shopware.com/assets/js/jquery.expandCode.js?v=1633502525"></script>
<script src="https://developers.shopware.com/assets/js/jquery.toc.js?v=1633502525"></script>
<script src="https://developers.shopware.com/assets/js/jquery.offcanvas.js?v=1633502525"></script>
<script src="https://developers.shopware.com/assets/js/app.js?v=1633502525"></script>
<script src="https://developers.shopware.com/assets/js/jquery.backtotop.js?v=1633502525"></script>
<script src="https://developers.shopware.com/assets/js/docsearch.min.js?v=1633502525"></script>
<script src="https://developers.shopware.com/assets/js/jquery.api-badge-copy-button.js?v=1633502525"></script>


<script id="usercentrics-cmp" data-settings-id="65ynhGFvE" src="https://app.usercentrics.eu/browser-ui/latest/bundle.js" defer></script>
<style id="usercentrics-styles">
    [data-testid="uc-container"] {
        --font-family: 'Brandon Text', 'Brandon', 'Arial', sans-serif;
        --primary-color: #189eff;
        --primary-color-fade: #189eff11;
        --primary-color-fade-hover: #189eff22;
        --border-color: #60718244;
        --icon-color: #607182bb;
        --text-color: #607182;
        --link-color: #142432cc;
        --headline-color: #142432;
        --bg-color: #f8f9fd;
    }

    /* Modal
    ----------------------------------- */
    .modal,
    [data-testid="uc-default-wall"] {
        padding: 20px 20px 15px;
        border: none;
        max-width: 700px;
        box-shadow: 0 40px 100px rgba(0,0,0,0.2);
    }
    .modal-overlay,
    [data-testid="uc-container"] > div:first-of-type {
        background: rgba(20,36,50,0.8);
        opacity: 1;
    }

    /* Head
    ----------------------------------- */
    .logo,
    [data-testid="uc-header"] > div:first-of-type > div {
        height: 38px;
        max-height: 38px;
    }
    .logo-spacer,
    [data-testid="uc-header"] > div:nth-child(2) {
        height: 36px;
    }

    /* Language Button
    ----------------------------------- */
    .language-button,
    [data-testid="uc-language-container"] [data-testid="uc-language-button"] {
        border-radius: 4px 4px 0 0;
        border-color: var(--border-color, #60718244);
    }
    .language-button:last-child,
    [data-testid="uc-language-container"] [data-testid="uc-language-button"]:last-child {
        border-radius: 4px;
    }
    .language-text,
    [data-testid="uc-language-button"] > div {
        padding-left: 5px;
        padding-right: 14px;
        font-weight: 500;
        font-family: var(--font-family);
        color: var(--text-color, #607182);
    }
    .language-arrow,
    [data-testid="uc-language-button"] > i {
        border-width: 0 1px 1px 0;
        border-color: var(--icon-color, #607182bb);
        padding: 3px;
    }
    .language-dropdown,
    [data-testid="uc-language-container"] [data-testid="uc-language-menu"] {
        border-radius: 0 0 4px 4px;
        border: solid var(--border-color, #60718244);
        border-width: 0 1px 1px 1px;
        box-shadow: unset;
    }
    .language-dropdown-item,
    [data-testid="uc-language-container"] [data-testid="uc-language-menu-item"] {
        font-weight: 500;
        font-family: var(--font-family);
        color: #607182AA;
        border-width: 1px 0 0 0;
        border-color: var(--border-color, #60718244);
        transition: unset !important;
    }
    .language-dropdown-item:first-child,
    [data-testid="uc-language-container"] [data-testid="uc-language-menu-item"]:first-child {
        border-top: 0;
    }
    .language-dropdown-item:hover,
    [data-testid="uc-language-container"] [data-testid="uc-language-menu-item"]:hover {
        background-color: var(--primary-color-fade, #189eff11);
        color: var(--primary-color, #189eff);
    }

    /* Text
    ----------------------------------- */
    .headline,
    [data-testid="uc-header"] > h1 {
        margin-bottom: 8px;
        font-size: 18px;
        font-weight: 600;
        color: var(--headline-color, #142432);
    }
    .description,
    [data-testid="uc-header"] div:nth-of-type(4) {
        font-weight: 400;
        line-height: 1.72;
        color: var(--text-color, #607182);
    }
    .text-spacer,
    [data-testid="uc-header"] div:nth-of-type(6) {
        height: 20px;
    }

    /* Anchor Link
    ----------------------------------- */
    .anchor-link,
    [data-testid="uc-container"] [data-testid="uc-customize-anchor"],
    [data-testid="uc-container"] [data-testid="uc-anchors"] [data-testid="uc-anchor-link"],
    .settings-link,
    [data-testid="uc-container"] [data-testid="uc-customize-anchor"] a {
        padding-top: 0;
        font-size: 14px;
        font-weight: 500;
        color: var(--link-color, #142432cc);
        transition: unset;
    }
    .anchor-link:hover,
    [data-testid="uc-container"] [data-testid="uc-anchors"] [data-testid="uc-anchor-link"]:hover,
    .settings-link,
    [data-testid="uc-container"] [data-testid="uc-customize-anchor"]:hover a {
        text-decoration: underline;
        color: var(--primary-color, #189eff);
    }
    .anchor-link-icon,
    [data-testid="uc-container"] [data-testid="uc-anchors"] [data-testid="uc-anchor-link"] > i,
    .settings-link,
    [data-testid="uc-container"] [data-testid="uc-customize-anchor"] > i {
        display: none;
    }
    .anchor-link,
    [data-testid="uc-container"] [data-testid="uc-anchors"] [data-testid="uc-anchor-link"] {
        margin-right: 14px;
        padding-right: 14px;
        border-right: 1px solid var(--border-color, #60718244);
    }

    /* Button
    ----------------------------------- */
    .button-accept-all,
    [data-testid="uc-container"] [data-testid="uc-accept-all-button"] {
        padding: 16px;
        font-size: 16px;
        font-weight: 500;
        letter-spacing: 0.02em;
        color: #fff;
    }
    .button-save-settings,
    [data-testid="uc-container"] [data-testid="uc-save-button"] {
        padding: 16px;
        font-size: 16px;
        font-weight: 500;
        letter-spacing: 0.02em;
        background-color: var(--primary-color-fade, #189eff11);
        color: var(--primary-color, #189eff);
    }
    .button-save-settings:hover,
    [data-testid="uc-container"] [data-testid="uc-save-button"]:hover {
        background-color: var(--primary-color-fade-hover, #189eff22);
        color: var(--primary-color, #189eff);
    }

    /* More Settings :: Tabs
    ----------------------------------- */
    .tabs,
    [data-testid="uc-container"]  [data-testid="uc-tabs"] [aria-label="SettingsTabs"] {
        border-bottom: 1px solid #ececec;
    }
    .tab,
    [data-testid="uc-container"] [data-testid="uc-tabs"] [data-testid="uc-tab-categories"],
    [data-testid="uc-container"] [data-testid="uc-tabs"] [data-testid="uc-tab-services"] {
        padding: 8px 0 16px;
        position: relative;
        top: 1px;
        font-weight: 500;
        background: none;
        color: var(--text-color, #607182);
    }
    .tab,
    [data-testid="uc-container"] [data-testid="uc-tabs"] [data-testid="uc-tab-categories"][aria-selected="true"],
    [data-testid="uc-container"] [data-testid="uc-tabs"] [data-testid="uc-tab-services"][aria-selected="true"] {
        padding: 8px 0 16px;
        font-weight: 600;
        color: var(--primary-color, #189eff);
    }

    /* More Settings :: Panels
    ----------------------------------- */
    .panel-list,
    [data-testid="uc-container"] [data-testid="uc-panel-categories"],
    [data-testid="uc-container"] [data-testid="uc-panel-services"] {
        background-color: var(--bg-color, #f8f9fd);
    }
    .panel-box,
    [data-testid="uc-container"] [data-testid="uc-expandable-card"] {
        padding: 20px;
    }
    .panel-box-border,
    [data-testid="uc-container"] [data-testid="uc-expandable-card"] button {
        border-bottom: none;
    }
    .panel-headline,
    [data-testid="uc-container"] [data-testid="uc-expandable-card"] button > div:first-of-type {
        color: var(--headline-color, #142432);
        font-weight: 500;
        font-size: 16px;
    }
    .panel-description,
    [data-testid="uc-container"] [data-testid="uc-expandable-card"] button > div:nth-of-type(2) {
        margin-top: 12px;
        color: var(--text-color, #607182);
        line-height: 1.62;
    }
    .panel-expandable-box,
    [data-testid="uc-container"] [data-testid="uc-panel-categories"] [data-testid="uc-expandable-card"],
    [data-testid="uc-container"] [data-testid="uc-panel-services"] [data-testid="uc-expandable-card"] {
        border: 1px solid var(--border-color, #60718244);
        box-shadow: none;
        overflow: hidden;
        border-radius: 4px;
    }
    .panel-expandable-label,
    [data-testid="uc-container"] [data-testid="uc-expandable-content"] label {
        margin-left: 10px;
        font-size: 14px;
        font-weight: 500;
        color: var(--text-color, #607182);
    }

    /* Footer
    ----------------------------------- */
    .footer,
    [data-testid="uc-container"] footer {
        border-top: none;
    }
    .powered-by,
    [data-testid="uc-container"] footer [data-testid="uc-footer"] > div:nth-of-type(2) {
        font-size: 11px;
        letter-spacing: 0.01em;
        color: var(--text-color, #607182);
        opacity: .75;
    }
    .tabs-footer,
    [data-testid="uc-container"] [data-testid="uc-default-settings"] > div:first-of-type {
        border-bottom: 1px solid #ececec;
    }
</style>

<script>
    // Inject styles
    $(document).ready(function() {
        const user = document.getElementById('usercentrics-root');
        const styles = document.getElementById('usercentrics-styles');
        user.shadowRoot.append(styles);
    });

    // Function to open consent modal
    const consentButton = document.getElementById('show-consent');
    if (consentButton) {
        consentButton.addEventListener('click', function(){
            UC_UI.showSecondLayer();
        });
    }

    let userCentricsCalls = 0;
    let userCentrics = null;
    window.addEventListener('ucEvent', function(e) {
        if (e.detail.event === 'consent_status' && userCentricsCalls <= 0) {
            userCentrics = e.detail;
        }
        if (userCentrics !== e.detail && userCentricsCalls <= 1) {
            location.reload();
        }
        userCentricsCalls++;
    });
</script>

<!-- Google Tag Manager -->
<script type="text/plain" data-usercentrics="Google Tag Manager">(function (w, d, s, l, i) {
    w[l] = w[l] || [];
    w[l].push({
        'gtm.start': new Date().getTime(), event: 'gtm.js'
    });
    var f = d.getElementsByTagName(s)[0],
            j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : '';
    j.async = true;
    j.src =
            '//www.googletagmanager.com/gtm.js?id=' + i + dl;
    f.parentNode.insertBefore(j, f);
})(window, document, 'script', 'dataLayer', 'GTM-WJKMNPS');</script>
<!-- End Google Tag Manager -->

</body>
</html>