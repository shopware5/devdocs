<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Elasticsearch setup</title>

        <meta name="description" content="Elasticsearch setup">
    
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#26556f">

    <link rel="stylesheet" href="https://developers.shopware.com/assets/css/open-sans-font.css?v=1641314067">
    <link rel="stylesheet" href="https://developers.shopware.com/assets/css/highlight-github-gist.min.css?v=1641314067">
    <link rel="stylesheet" href="https://developers.shopware.com/assets/css/docsearch.min.css?v=1641314067">
    <link rel="stylesheet" href="https://developers.shopware.com/assets/css/basic.css?v=1641314067" media="screen">

    <link rel="apple-touch-icon" sizes="57x57" href="https://developers.shopware.com/assets/favicons/apple-icon-57x57.png?v=1641314067">
    <link rel="apple-touch-icon" sizes="60x60" href="https://developers.shopware.com/assets/favicons/apple-icon-60x60.png?v=1641314067">
    <link rel="apple-touch-icon" sizes="72x72" href="https://developers.shopware.com/assets/favicons/apple-icon-72x72.png?v=1641314067">
    <link rel="apple-touch-icon" sizes="76x76" href="https://developers.shopware.com/assets/favicons/apple-icon-76x76.png?v=1641314067">
    <link rel="apple-touch-icon" sizes="114x114" href="https://developers.shopware.com/assets/favicons/apple-icon-114x114.png?v=1641314067">
    <link rel="apple-touch-icon" sizes="120x120" href="https://developers.shopware.com/assets/favicons/apple-icon-120x120.png?v=1641314067">
    <link rel="apple-touch-icon" sizes="144x144" href="https://developers.shopware.com/assets/favicons/apple-icon-144x144.png?v=1641314067">
    <link rel="apple-touch-icon" sizes="152x152" href="https://developers.shopware.com/assets/favicons/apple-icon-152x152.png?v=1641314067">
    <link rel="apple-touch-icon" sizes="180x180" href="https://developers.shopware.com/assets/favicons/apple-icon-180x180.png?v=1641314067">
    <link rel="apple-touch-icon-precomposed" href="https://developers.shopware.com/assets/favicons/apple-icon-precomposed.png?v=1641314067">
    <link rel="icon" type="image/png" sizes="192x192" href="https://developers.shopware.com/assets/favicons/android-icon-192x192.png?v=1641314067">
    <link rel="icon" type="image/png" sizes="32x32" href="https://developers.shopware.com/assets/favicons/favicon-32x32.png?v=1641314067">
    <link rel="icon" type="image/png" sizes="96x96" href="https://developers.shopware.com/assets/favicons/favicon-96x96.png?v=1641314067">
    <link rel="icon" type="image/png" sizes="16x16" href="https://developers.shopware.com/assets/favicons/favicon-16x16.png?v=1641314067">
    <link rel="shortcut icon" href="https://developers.shopware.com/assets/favicons/favicon.ico?v=1641314067">

    <link rel="alternate" type="application/atom+xml" href="https://developers.shopware.com/blog/atom.xml" title="Shopware Developer blog feed">
</head>

<body>
<div class="wrapper">

    <header class="header--main">

        <a href="https://developers.shopware.com/" class="offcanvas--trigger" title="Navigation">
            <i class="icon-list"></i>
        </a>

        <a href="https://developers.shopware.com/" title="Shopware Developer Documentation" class="logo">
            <img src="https://developers.shopware.com/assets/img/shopware_developers_logo_white.svg?v=1641314067">
        </a>

    </header>

    <div id="searchBox">
        <form action="#" method="get" id="search-form">
            <input type="text" id="search-query" name="q" placeholder="Search" autocomplete="off">
            <button id="search-action"></button>
        </form>
    </div>

    <nav class="navi--main" data-offcanvas="true">
        <div class="navi--content">
            <ul class="navi--tree">
                <li class="navi--chapter is--active">
                    <a href="/" class="navi--link has--children">
                        Shopware 5
                    </a>
                    <ul class="navi--sub-1-tree">
                        
                        <li class="navi--sub-1-chapter">
                            <a href="/developers-guide/" class="navi--link has--children">
                                Developer Guides
                            </a>

                                                        <ul class="navi--sub-2-tree is--bulleted">
                                                                <li class="navi--sub-2-chapter">

                                    <a class="navi--link has--children" href="/plugin-guide/">
                                        Developing plugins
                                    </a>

                                                                        <ul class="navi--sub-3-tree is--numbered">

                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/plugin-quick-start/">
                                                Quick Startup Guide
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/example-plugin/">
                                                Example plugin
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/controller/">
                                                Controllers
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/models/">
                                                Models
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/plugin-guidelines/">
                                                Plugin guidelines
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/event-guide/">
                                                Events
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/event-list/">
                                                Event list
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/services/">
                                                Services
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/plugin-configuration/">
                                                Plugin configuration
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/plugin-testing/">
                                                Plugin testing
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/plugin-license/">
                                                Plugin License
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/shopware-5-plugin-update-guide/">
                                                Plugin update guide
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/plugin-extension-by-plugin/">
                                                Extend an existing plugin
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/legacy-plugin-system/">
                                                The legacy Plugin System
                                            </a>
                                        </li>
                                                                            </ul>
                                                                    </li>
                                                                <li class="navi--sub-2-chapter">

                                    <a class="navi--link has--children" href="/developers-guide/general-resources/">
                                        General Resources
                                    </a>

                                                                        <ul class="navi--sub-3-tree is--bulleted">

                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/cheat-sheet/">
                                                Cheat-Sheet
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/phpstorm/">
                                                Setting up PhpStorm
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/shopware-5-upgrade-guide-for-developers/">
                                                Upgrade Guide
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/shopware-5-performance-for-devs/">
                                                Performance Guide
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/coding-standards/">
                                                Coding Standards
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/shopware-composer/">
                                                Using composer with Shopware
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/debugging/">
                                                Debugging Shopware
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/elasticsearch/">
                                                Elasticsearch
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/shopware-config/">
                                                config.php settings
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/blog/2015/06/09/understanding-the-shopware-hook-system/">
                                                Hooks
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/blog/2015/08/11/the-shopware-seo-engine/">
                                                SEO Engine
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/shopware-5-media-service/">
                                                MediaService
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/address-management-guide/">
                                                Address Management
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/http-cache/">
                                                HTTP Cache
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/attribute-system/">
                                                Attributes
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/csrf-protection/">
                                                CSRF Protection
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/content-types/">
                                                Content-Types
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/dic-tags/">
                                                Dependency Injection Tags
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/shopware-5-cli-commands/">
                                                CLI commands
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/implementing-your-own-captcha/">
                                                Captcha
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/shopware-5-search-bundle/">
                                                SearchBundle
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/shopware-5-core-service-extensions/">
                                                Service extensions
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/entity-relationship-model/">
                                                Entity relationship model
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/password-encoder/">
                                                Password encoder
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/global-variables-in-templates/">
                                                Global variables in templates
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/cookie-consent-manager/">
                                                Register a cookie to the cookie consent manager
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/media-optimizer/">
                                                Media Optimizer
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/customer-streams-extension/">
                                                Customer - Search &amp; Streams
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/product-export/">
                                                Product exports
                                            </a>
                                        </li>
                                                                            </ul>
                                                                    </li>
                                                                <li class="navi--sub-2-chapter">

                                    <a class="navi--link has--children" href="/developers-guide/tutorials/">
                                        Tutorials
                                    </a>

                                                                        <ul class="navi--sub-3-tree is--bulleted">

                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/custom-shopping-world-elements/">
                                                Create custom shopping worlds elements
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/digital-publishing-elements/">
                                                Create custom digital publishing elements
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/plugin-lastregistrations-widget/">
                                                Create your own backend widget
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/emotion-preset-plugin/">
                                                Create custom emotion preset plugin
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/plugin-slugify/">
                                                Create custom url slugger
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/payment-plugin/">
                                                Create custom payment plugin
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/risk-rules/">
                                                Risk Rules
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/vagrant-phpstorm/">
                                                Vagrant and PHPStorm
                                            </a>
                                        </li>
                                                                            </ul>
                                                                    </li>
                                                                <li class="navi--sub-2-chapter">

                                    <a class="navi--link has--children" href="/developers-guide/backend-and-extjs/">
                                        Backend and ExtJS
                                    </a>

                                                                        <ul class="navi--sub-3-tree is--bulleted">

                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/backend-extension/">
                                                Extending the backend
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/backend-components/basics/">
                                                Basics
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/backend-components/listing/">
                                                Listing
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/backend-components/detail/">
                                                Detail
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/backend-components/associations/">
                                                Associations
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/backend-components/listing-extensions/">
                                                Listing extensions
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/backend-components/batch-processes/">
                                                Batch processes
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/backend-statistics-extension/">
                                                Statistics extension
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/lightweight-backend-modules/">
                                                Lightweight backend modules
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/backend-icons/">
                                                Backend icon set
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/backend-escaping/">
                                                Backend escaping
                                            </a>
                                        </li>
                                                                            </ul>
                                                                    </li>
                                                                <li class="navi--sub-2-chapter">

                                    <a class="navi--link has--children" href="/developers-guide/rest/">
                                        REST API
                                    </a>

                                                                        <ul class="navi--sub-3-tree is--bulleted">

                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/">
                                                REST API Basics
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/api-resource-address/">
                                                Address resource
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/api-resource-article/">
                                                Product resource
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/examples/article/">
                                                Product examples
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/api-resource-variants/">
                                                Variants resource
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/api-resource-cache/">
                                                Cache resource
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/examples/cache/">
                                                Cache examples
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/api-resource-categories/">
                                                Category resource
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/examples/category/">
                                                Category examples
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/api-resource-countries/">
                                                Country resource
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/api-resource-customer/">
                                                Customer resource
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/examples/customer/">
                                                Customer examples
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/examples/customer-streams/">
                                                Customer Streams Examples
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/api-resource-customer-group/">
                                                Customer group resource
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/api-resource-generate-article-images/">
                                                Generate product images resource
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/api-resource-manufacturers/">
                                                Manufacturer resource
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/api-resource-media/">
                                                Media resource
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/examples/media/">
                                                Media examples
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/api-resource-orders/">
                                                Order resource
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/examples/order/">
                                                Order examples
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/api-resource-payment-methods/">
                                                Payment method resource
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/examples/payment/">
                                                Payment examples
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/api-resource-property-group/">
                                                Property group resource
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/api-resource-shops/">
                                                Shop resource
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/api-resource-translation/">
                                                Translation resource
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/examples/translation/">
                                                Translation examples
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/api-resource-user/">
                                                User resource
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/api-resource-version/">
                                                Version resource
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/examples/merge-mode/">
                                                Merge mode
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/examples/batch/">
                                                Batch mode
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/examples/filter/">
                                                Filter
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/models/">
                                                Models
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/plugin-api-extension/">
                                                Create your own endpoint
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/extend-api-resource/">
                                                Extend a REST API resource
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/faq/">
                                                REST API FAQ
                                            </a>
                                        </li>
                                                                            </ul>
                                                                    </li>
                                                            </ul>
                                                    </li>

                        
                        <li class="navi--sub-1-chapter">
                            <a href="/designers-guide/" class="navi--link has--children">
                                Frontend Guides
                            </a>

                                                        <ul class="navi--sub-2-tree is--bulleted">
                                                                <li class="navi--sub-2-chapter">

                                    <a class="navi--link has--children" href="/theme-guide/">
                                        Developing Themes
                                    </a>

                                                                        <ul class="navi--sub-3-tree is--numbered">

                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/theme-startup-guide/">
                                                Theme Startup Guide
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/getting-started/">
                                                Getting started with templating
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/smarty/">
                                                Getting started with Smarty
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/less/">
                                                Getting started with LESS
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/css-and-js-files-usage/">
                                                Using CSS and JavaScript
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/responsive-theme-default-components/">
                                                Using the theme default components
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/javascript-statemanager-and-pluginbase/">
                                                jQuery plugins &amp; the StateManager
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/configuration-using-theme-php/">
                                                Custom theme configuration
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/preparing-themes-for-the-community-store/">
                                                Preparing themes for the Community Store
                                            </a>
                                        </li>
                                                                            </ul>
                                                                    </li>
                                                                <li class="navi--sub-2-chapter">

                                    <a class="navi--link has--children" href="/designers-guide/general-resources/">
                                        General Resources
                                    </a>

                                                                        <ul class="navi--sub-3-tree is--bulleted">

                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/eslint-for-plugins/">
                                                ESLint for plugins
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/javascript-coding-style/">
                                                Javascript Coding Style
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/styletile/">
                                                UI Components
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/snippets/">
                                                Snippet Management
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/datepicker/">
                                                Datepicker
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/external-resources/">
                                                Embedding external resources
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/responsive-images/">
                                                Responsive images
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/smarty-plugins/">
                                                Smarty Plugins
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/best-practice-theme-development/">
                                                Using the Grunt watcher
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/modify-jquery-plugins/">
                                                Modify jQuery plugins
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/managing-third-party-dependencies-with-bower/">
                                                Managing dependencies with Bower
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/managing-third-party-dependencies-with-npm/">
                                                Managing dependencies with NPM
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/legacy-template-development-in-shopware-5/">
                                                Legacy template development
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/how-to-use-karma/">
                                                Testing with Karma
                                            </a>
                                        </li>
                                                                            </ul>
                                                                    </li>
                                                                <li class="navi--sub-2-chapter">

                                    <a class="navi--link has--children" href="/designers-guide/tutorials/">
                                        Tutorials
                                    </a>

                                                                        <ul class="navi--sub-3-tree is--bulleted">

                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/find-smarty-blocks/">
                                                How to find smarty blocks
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/custom-templates/">
                                                Adding custom templates
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/custom-listing-page/">
                                                Example: Custom listing page
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/custom-detail-page/">
                                                Example: Custom Detail page
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/edit-newsletter-and-document-templates/">
                                                Edit newsletter and document templates
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/google-pagespeed-best-practise/">
                                                Google PageSpeed
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/browser-notice/">
                                                Outdated browser notification
                                            </a>
                                        </li>
                                                                                <li class="navi--sub-3-chapter">
                                            <a class="navi--link" href="/designers-guide/range-slider-algorithm/">
                                                Range slider algorithm
                                            </a>
                                        </li>
                                                                            </ul>
                                                                    </li>
                                                            </ul>
                                                    </li>

                        
                        <li class="navi--sub-1-chapter">
                            <a href="/community/" class="navi--link has--children">
                                Community
                            </a>

                                                        <ul class="navi--sub-2-tree is--bulleted">
                                                                <li class="navi--sub-2-chapter">

                                    <a class="navi--link" href="/community/contribution-guideline/">
                                        Contribution Guideline
                                    </a>

                                                                    </li>
                                                                <li class="navi--sub-2-chapter">

                                    <a class="navi--link" href="/community/contributing-code/">
                                        Contributing Code
                                    </a>

                                                                    </li>
                                                            </ul>
                                                    </li>

                        
                        <li class="navi--sub-1-chapter is--active">
                            <a href="/sysadmins-guide/" class="navi--link is--active has--children">
                                System Guides
                            </a>

                                                        <ul class="navi--sub-2-tree">
                                                                <li class="navi--sub-2-chapter">

                                    <a class="navi--link" href="/sysadmins-guide/system-requirements/">
                                        System requirements
                                    </a>

                                                                    </li>
                                                                <li class="navi--sub-2-chapter">

                                    <a class="navi--link" href="/sysadmins-guide/installation-guide/">
                                        Installation Guide
                                    </a>

                                                                    </li>
                                                                <li class="navi--sub-2-chapter">

                                    <a class="navi--link" href="/sysadmins-guide/update-guide/">
                                        Update Guide
                                    </a>

                                                                    </li>
                                                                <li class="navi--sub-2-chapter">

                                    <a class="navi--link" href="/sysadmins-guide/professional-deployments/">
                                        Professional Deployments
                                    </a>

                                                                    </li>
                                                                <li class="navi--sub-2-chapter">

                                    <a class="navi--link" href="/sysadmins-guide/shopware-5-performance-for-sysadmins/">
                                        Performance Guide
                                    </a>

                                                                    </li>
                                                                <li class="navi--sub-2-chapter is--active">

                                    <a class="navi--link is--active" href="/sysadmins-guide/elasticsearch-setup/">
                                        Elasticsearch setup
                                    </a>

                                                                    </li>
                                                                <li class="navi--sub-2-chapter">

                                    <a class="navi--link" href="/sysadmins-guide/varnish-setup/">
                                        Varnish setup
                                    </a>

                                                                    </li>
                                                                <li class="navi--sub-2-chapter">

                                    <a class="navi--link" href="/sysadmins-guide/sessions/">
                                        Sessions
                                    </a>

                                                                    </li>
                                                                <li class="navi--sub-2-chapter">

                                    <a class="navi--link" href="/sysadmins-guide/shopware-cluster-setup/">
                                        Cluster setup
                                    </a>

                                                                    </li>
                                                            </ul>
                                                    </li>

                        
                        <li class="navi--sub-1-chapter">
                            <a href="/labs/" class="navi--link has--children">
                                Labs
                            </a>

                                                        <ul class="navi--sub-2-tree is--bulleted">
                                                                <li class="navi--sub-2-chapter">

                                    <a class="navi--link" href="/labs/3d-product-visualization/">
                                        3D Product visualization
                                    </a>

                                                                    </li>
                                                            </ul>
                                                    </li>

                        
                        <li class="navi--sub-1-chapter">
                            <a href="/blog/" class="navi--link">
                                Blog
                            </a>

                                                    </li>

                                            </ul>
                </li>
            </ul>
            <ul class="navi--tree">
                <li class="navi--chapter">
                    <a href="https://docs.shopware.com/en/shopware-platform-dev-en" class="navi--link">
                        <span>
                            Shopware 6
                        </span>
                        <span>
                            <i class="icon-external-link"></i>
                        </span>
                    </a>
                </li>
            </ul>
            <ul class="navi--tree">
                <li class="navi--chapter navi--backlink-mobile">
                    <a href="https://en.shopware.com" class="navi--link"><i class="icon--arrow-left"></i> Back to shopware.com</a>
                </li>
                <li class="navi--backlink">
                    <a href="https://en.shopware.com"><i class="icon--arrow-left"></i>Back to shopware.com</a>
                </li>
            </ul>
        </div>
    </nav>

        <div class="devdocs content">

        <section id="search-results" style="display: none;">
            <h2 class="search-results--headline" id="search-results">Search results</h2>

            <div class="entries"></div>
        </section>

        <div class="inner-container">

            <div class="info">

                                    <span class="version clearfix" data-shopware-version="5.1.0">
                        <span class="versionDisc">as of version</span>
                        <span class="versionBadge">5.1.0</span>
                    </span>
                
                                <a class="edit-on-github" href="https://github.com/shopware/devdocs/blob/master/source/sysadmins-guide/elasticsearch-setup/index.md" target="_blank"><i class="icon-github"></i> Edit this page on GitHub</a>
                
            </div>

                        <h1>
                Elasticsearch setup
            </h1>
            
            <div class="toc-list"></div>

<h2 id="introduction">Introduction</h2>

<p>For shops that contain millions of different products,
Shopware 5 requires an alternative to MySQL to be able to provide an optimal user experience in terms of both functionality and speed.</p>

<p><a href="https://www.elastic.co/products/elasticsearch">Elasticsearch</a> is an open source search engine,
built to handle such scenarios, where a set of millions of entries needs to be queried in just a few milliseconds.</p>

<p>Shopware 5.0 is able to provide a seamless Elasticsearch integration that will greatly benefit those shops.</p>

<div class="alert alert-info" role="alert">
    <strong>Note:</strong>
Elasticsearch integration should be considered an advanced Shopware feature.
It requires the installation and configuration of Elasticsearch itself as well as technical personal to monitor and maintain the synchronization continuously.
This might not be possible on all hosting plans or providers.<br>
Additionally, it will mostly benefit shops containing hundreds of thousands or millions of items.
On smaller shops, its usage is not recommended, as you might not experience any visible benefits from it.
</div>

<h2 id="installation-and-configuration">Installation and configuration</h2>

<p>To enable Elasticsearch integration, you must configure both your server and your Shopware 5 installation.
Elasticsearch 2.0 or newer is required. For Elasticsearch 6.0 Shopware 5.5 is required</p>

<h3 id="elasticsearch-installation-and-configuration">Elasticsearch installation and configuration</h3>

<p>Elasticsearch installation and configuration greatly depends on your operating system and hosting provider.
You will find extensive documentation online regarding the installation and configuration of Elasticsearch on most common Linux distributions.
Some hosting providers might also provide specific documentation regarding this subject.
Installation on Mac OSX or Windows is also possible, but not officially supported.</p>

<p>The current Shopware 5 integration is designed to work with the out-of-the-box configuration of Elasticsearch.
This does not mean, of course, that these are the best settings for a production environment.
Although they will affect performance and security, the settings you choose to use on your Elasticsearch setup will be mostly transparent to your Shopware installation.
The best setting constellation for your shop will greatly depend on your server setup, number and structure of products, replication requirements , to name a few.
These settings fall out of the scope of this document, but you can refer to the official <a href="https://www.elastic.co/guide/index.html">Elasticsearch documentation page</a> for more info.</p>

<h3 id="shopware-configuration">Shopware configuration</h3>

<p>By default, Elasticsearch integration is disabled in Shopware, as most shops won't benefit from it.
Like mentioned before, Elasticsearch should only be used in shops containing a large set of items.</p>

<p>To enable Elasticsearch (provided it's already installed, configured and running), edit your <code>config.php</code> file, adding the following array:</p>

<pre><code class="language-php">    // ...
    'es' =&gt; [
        'enabled' =&gt; true,
        'number_of_replicas' =&gt; null,
        'number_of_shards' =&gt; null,
        'version' =&gt; '5.6.5',
        'dynamic_mapping_enabled' =&gt; true,
        'client' =&gt; [
            'hosts' =&gt; [
                'localhost:9200'
            ]
        ]
    ],
    // Other configuration settings...
    // ...
</code></pre>

<p>Your config.php should look like this now:</p>

<pre><code class="language-php">&lt;?php
return [
    'db' =&gt; [
        'username' =&gt; 'dbuser',
        'password' =&gt; 'dbpw',
        'dbname' =&gt; 'dbname',
        'host' =&gt; 'localhost',
        'port' =&gt; '3306',  
    ],
    'es' =&gt; [
        'enabled' =&gt; true,
        'number_of_replicas' =&gt; null,
        'number_of_shards' =&gt; null,
        'version' =&gt; '5.6.5',
        'dynamic_mapping_enabled' =&gt; true,
        'client' =&gt; [
            'hosts' =&gt; [
                'localhost:9200'
            ]
        ]
    ],
    // Other configuration settings...
];
</code></pre>

<p>Shopware 5 communicates with Elasticsearch using the latter's REST API.
The <code>hosts</code> array accepts multiple address syntax, about which you can read more <a href="https://www.elastic.co/guide/en/elasticsearch/client/php-api/current/_configuration.html#_host_configuration">here</a>.
The version defines the used Elasticsearch Version. If not set in the config, Shopware will detect it automatically.
The <code>number_of_shards</code> and <code>number_of_replicas</code> parameter provided to the generated index.
A <code>null</code> configuration allows to use the elastic search server configuration of those parameters.</p>

<div class="alert alert-info" role="alert">
    <strong>Note:</strong>
For a single node configuration, which is sufficient for a development environment,
it is necessary to configure a `number_of_replicas` of `0` and `number_of_shards` of `1`,
otherwise the indexing process would wait for cluster health `green`, which can't be reached if no replicas can be applied.
</div>

<h3 id="defining-elasticsearch-version-to-reduce-calls">Defining Elasticsearch version to reduce calls</h3>

<p>By default, Shopware makes an <code>info</code> request to the Elasticsearch backend to be able to determine the version of Elasticsearch that is being used.
This happens once while the kernel is booting.
In high load environments, this can create unnecessary additional load on all services due to the slight overhead these requests create.</p>

<p>Starting with Shopware 5.5.5, it is possible to define the version of Elasticsearch being used in the <code>config.php</code> like described below.
Doing so will keep Shopware from making these <code>info</code> requests.</p>

<pre><code class="language-php">&lt;?php
return [
    // ...
    'es' =&gt; [
        // ...
        'version' =&gt; '7',
    ]
];
</code></pre>

<h3 id="define-elasticsearch-dynamic-mapping">Define Elasticsearch Dynamic Mapping</h3>

<p>By default, Shopware enables the dynamic mapping option.
By this, fields can be added dynamically to a document or to inner objects within a document, just by indexing a document containing the new field.</p>

<p>The problem with this option is, that Shopware provides floats and integers to Elasticsearch.
So Elasticsearch uses the first detect field mapping for dynamic fields and can't change it then.
This is the reason why sometimes products are indexed and sometimes not.</p>

<p>With disabling dynamicMapping, you have to provide a mapping for every Field which is used in Elasticsearch.
Only then the field will be indexed.
This will fix the type issues and product will get indexed.</p>

<p>Take a look <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/dynamic.html">here</a> for more information.</p>

<pre><code class="language-php">&lt;?php
return [
    ...
    'es' =&gt; [
        ...
        'dynamic_mapping_enabled' =&gt; true,
    ]
];
</code></pre>

<h3 id="initial-data-import">Initial data import</h3>

<div class="alert alert-info" role="alert">
    <strong>Note:</strong> If your shop has no products, you can skip this step.
</div>

<p>Once both Elasticsearch and Shopware 5 are configured and running, you should execute the following Shopware CLI command:</p>

<pre><code class="language-shell">php bin/console sw:es:index:populate
</code></pre>

<p>This command will reindex your shops data in Elasticsearch.
Keep in mind that, should your shops already have a large amount of product data, this process can take a considerable amount of time.
If you wish, you can limit this process per shop. Refer to the command's documentation for more info.</p>

<h3 id="maintaining-data-consistency">Maintaining data consistency</h3>

<p>In order to ensure data consistency between your MySQL database and your Elasticsearch indexes,
there are two CLI commands you need to periodically execute:</p>

<h4 id="live-synchronization">Live synchronization</h4>

<p>The <code>sw:es:backlog:sync</code> command ensures your latest changes are propagated into Elasticsearch.
It uses a queueing system, and it's execution time may greatly vary, depending on the pending operation list content.
This command should be executed periodically to ensure data consistency.</p>

<pre><code class="language-shell">php bin/console sw:es:backlog:sync
</code></pre>

<h4 id="data-reindexing">Data reindexing</h4>

<p>To ensure your MySQL database and your Elasticsearch instance are synchronized,
we recommend running a complete reindexing of your products daily.
This can be done by setting up a cron job that runs the following command:</p>

<pre><code class="language-shell">php bin/console sw:es:index:populate
</code></pre>

<p>We recommend running this command every 24 hours, at a time when your server expects less traffic (typically during the night).
There will be no downtime for both Shopware and Elasticsearch during its execution.</p>

<h2 id="elasticsearch-integration-details">Elasticsearch integration details</h2>

<p>While this guide is not meant to cover the technical details of the integration implementation in depth,
there are some concepts that you need to keep in mind when configuring the integration between Shopware and Elasticsearch.
The first and probably most important, is that Elasticsearch is NOT a MySQL replacement.
Although they provide, to some extent, similar features, Elasticsearch is and should be seen as a complement to a DBMS, not as a replacement.
As such, you will still require a running MySQL instance, and its configuration will still greatly affect Shopware's performance in most actions.</p>

<p>Another vital detail you should keep in mind when using Elasticsearch with Shopware is,
that the data stored in Elasticsearch is a duplicate of the data already present in your Shopware 5 database.
Whenever changes are made to your data (for example, you edit a product description),
that information is saved to MySQL and, only later, to Elasticsearch.</p>

<h3 id="using-and-understanding-the-data-synchronization-mechanism">Using and understanding the data synchronization mechanism</h3>

<p>Some changes shop owners perform in the backend may affect a great number of entries on your database.
For example, a change in your default tax rate could theoretically affect all your products.
MySQL data is not greatly affected by this, as the gross value calculation is done when the product is loaded from the database.
However, Elasticsearch may store gross values, to speed up performance.
This has the obvious downside that, if your tax rate changes, you need to update all your products prices.
If your shop has hundreds of thousands or millions of products, this operation can take a significant amount of time, even on a high performance application like Elasticsearch.
To handle these scenarios, the Elasticsearch integration in Shopware 5 includes support for asynchronous data propagation to Elasticsearch.</p>

<h4 id="the-queueing-system">The queueing system</h4>

<p>The asynchronous propagation of change to Elasticsearch is implemented using an operation queuing system.
Operations are stored in the <code>s_es_backlog</code> by hooking into Doctrine's <code>postPersist</code>, <code>postUpdate</code> and <code>postRemove</code> events for selected entities.
The events store the entity type, its ID, the operation to be executed.</p>

<h4 id="the-synchronization-process">The synchronization process</h4>

<p>These events are handled by a CLI command included in Shopware, which you can execute using the following line:</p>

<pre><code class="language-shell">php bin/console sw:es:backlog:sync
</code></pre>

<p>When executed, this command loads all operations from the queue which have not yet been executed.
It then executes them, in the order in which they were queued.</p>

<p>It's highly recommended that you set up a cron job in your system to periodically execute this command,
in order to ensure your MySQL database and Elasticsearch have consistent data.
The configuration of this cron task will depend on your system's operating system, and is not part of the scope of this guide.</p>

<h4 id="event-handling-workflow">Event handling workflow</h4>

<p>Shopware detects data changes over the doctrine ORM event system.
Those events are triggered if doctrine persist changes into the database.</p>

<p>Traced models:</p>

<ul>
<li>
<code>Shopware\Models\Article\Supplier</code>
</li>
<li>
<code>Shopware\Models\Tax\Tax</code>
</li>
<li>
<code>Shopware\Models\Property\Option</code>
</li>
<li>
<code>Shopware\Models\Property\Value</code>
</li>
<li>
<code>Shopware\Models\Article\Article</code>
</li>
<li>
<code>Shopware\Models\Article\Vote</code>
</li>
<li>
<code>Shopware\Models\Article\Detail</code>
</li>
<li>
<code>Shopware\Models\Article\Price</code>
</li>
</ul>

<p>When changes to entities belonging to these models are done,
they are immediately saved in the MySQL database, but propagation to Elasticsearch is delayed until the next execution of the <code>sw:es:backlog:sync</code> command.</p>

<h3 id="rebuilding-the-search-index">Rebuilding the search index</h3>

<p>As discussed before, the synchronization process between Shopware/MySQL and Elasticsearch traces only changes of defined entities.
Global system changes like <code>created a new shop</code>, <code>created new customer groups</code> are not detected by the synchronization and only be considered at indexing time.
The <code>sw:es:index:populate</code> command does just that.</p>

<p>Internally, Elasticsearch uses <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/glossary.html#glossary-index">indexes</a> to store your data.
If you are new to Elasticsearch, think of indexes as MySQL databases: they contain your data, and you can read from and write to them.
Fully regenerating an index can take a significant amount of time, just as loading a database from an <code>.sql</code> file can, during which your data is unavailable.</p>

<h4 id="cycling-indexes">Cycling indexes</h4>

<p>To avoid downtime, even when you are reindexing your shop's data, Shopware uses multiple indexes instead of just one.
If you trigger the reindexing process, Shopware will index your data into a completely new index.
While your shop is being indexed, if a customer queries your shop, the old index will be used to provide the results.
As such, there's no downtime.
Once your indexing process is finished, Shopware will automatically start using the new one.
The old index is not deleted.
Should you detect a problem with the new index, you can revert to the old one, instead of having to wait for a full reindexing of your shop.
Shopware provides a tool to switch back to this old indices:</p>

<pre><code class="language-shell">php bin/console sw:es:switch:alias --shopId=1 --index=sw_shop1_TIMESTAMP
</code></pre>

<p>Again, this is done so that, no matter what happens, there's no downtime for your customers.</p>

<h4 id="concurrent-usage">Concurrent usage</h4>

<p>While your data is being indexed, the shop owner might make some changes to its products.
This could cause your new index to be inconsistent, but Shopware handles this too, ensuring your newly created index includes even the changes made while it was being created.</p>

<p>As mentioned before, Shopware uses a queuing system to asynchronously handle changes to your data.
But this queue is not used only for this.
When the indexing process starts, Shopware records the current position of the queue end.
As the indexing takes place, the shop owner may manipulate data, resulting in operations being added to the queue.
When the indexing is finished, Shopware is able to determine if new operations were carried out while the data was being indexed.
Should that be the case, the new operations are re-executed on the new index, ensuring consistency.</p>

<h4 id="index-cleanup">Index cleanup</h4>

<p>After a new index is created, the old one is no longer used, but is not deleted.
Should your new index be corrupted, you can just replace it with the old one, and have your shop running again without downtime.
However, as new indexes should be created often (recommended every 24 hours), old indexes can accumulate and start taking up a significant amount of resources.
Shopware provides a tool to clean up those old indexes:</p>

<pre><code class="language-shell">php bin/console sw:es:index:cleanup
</code></pre>

<p>This command will delete every old version of an index, but keep the latest.
As such, it's safe to run this command even on production environments,
provided you have ensured that your current index is working as intended.</p>

<h4 id="backlog-cleanup">Backlog cleanup</h4>

<p>Like the old indices, the processed backlog queue is never deleted which allows reproducing data changes of the system in case of an index rollback.
Shopware provides a tool to clean up those processed backlog queue:</p>

<pre><code class="language-shell">php bin/console sw:es:backlog:clear
</code></pre>

<p>As such, it's safe to run this command even on production environments,
provided you have ensured that your current index is working as intended.</p>

<h2 id="elasticsearch-in-backend">Elasticsearch in Backend</h2>

<p>Since Shopware 5.5 it is also possible to use Elasticsearch in the backend for listing and search operations for products, orders and customers.
To use this you need to adjust your <code>config.php</code> to</p>

<pre><code class="language-php">return [
    'db' =&gt; [
        'username' =&gt; 'dbuser',
        'password' =&gt; 'dbpw',
        'dbname' =&gt; 'dbname',
        'host' =&gt; 'localhost',
        'port' =&gt; '3306',  
    ],
    'es' =&gt; [
        'enabled' =&gt; true,
        'number_of_replicas' =&gt; null,
        'number_of_shards' =&gt; null,
        'client' =&gt; [
            'hosts' =&gt; [
                'localhost:9200'
            ]
        ],
        'backend' =&gt; [
            'write_backlog' =&gt; true,
            'enabled' =&gt; true,
        ],
    ],
];
</code></pre>

<h3 id="initial-data-import-0">Initial data import</h3>

<p>Once Shopware is configured for using Elasticsearch in the backend, you should execute the following Shopware CLI command:</p>

<pre><code class="language-shell">php bin/console sw:es:backend:index:populate
</code></pre>

<h4 id="live-synchronization-0">Live synchronization</h4>

<p>The <code>sw:es:backend:sync</code> command ensures your latest changes are propagated into Elasticsearch.
It uses a queueing system, and it's execution time may greatly vary, depending on the pending operation list content.
This command should be executed periodically to ensure data consistency.</p>

<pre><code class="language-shell">php bin/console sw:es:backend:sync
</code></pre>

<h4 id="index-cleanup-0">Index cleanup</h4>

<p>After a new index is created, the old one is no longer used, but is not deleted.
Should your new index be corrupted, you can just replace it with the old one, and have your shop running again without downtime.
However, as new indexes should be created often (recommended every 24 hours), old indexes can accumulate and start taking up a significant amount of resources.
Shopware provides a tool to clean up those old indexes:</p>

<pre><code class="language-shell">php sw:es:backend:index:cleanup
</code></pre>

                    </div>

        <div class="clearfix"></div>
        <a href="#0" class="dev-top">Top</a>
    </div>
    

    <!-- Footer -->
            <footer class="main-footer">
            <div class="footer--container">
                <div class="copyright">2022  shopware AG - All rights reserved</div>
                <div class="footer--links">
                    <a href="https://en.shopware.com/legal-notice" target="_blank" title="Imprint">Imprint</a> |
                    <a href="https://en.shopware.com/gtc" target="_blank" title="Terms and Conditions">Terms and Conditions</a> |
                    <a id="show-consent" href="#" title="Cookie settings">Cookie settings</a>
                </div>
            </div>
        </footer>
    </div>

<script src="https://developers.shopware.com/assets/js/jquery.min.js?v=1641314067"></script>
<script src="https://developers.shopware.com/assets/js/highlight.min.js?v=1641314067"></script>
<script src="https://developers.shopware.com/assets/js/highlight-lang-less.min.js?v=1641314067"></script>
<script src="https://developers.shopware.com/assets/js/anchor.min.js?v=1641314067"></script>
<script src="https://developers.shopware.com/assets/js/jquery.expandCode.js?v=1641314067"></script>
<script src="https://developers.shopware.com/assets/js/jquery.toc.js?v=1641314067"></script>
<script src="https://developers.shopware.com/assets/js/jquery.offcanvas.js?v=1641314067"></script>
<script src="https://developers.shopware.com/assets/js/app.js?v=1641314067"></script>
<script src="https://developers.shopware.com/assets/js/jquery.backtotop.js?v=1641314067"></script>
<script src="https://developers.shopware.com/assets/js/docsearch.min.js?v=1641314067"></script>
<script src="https://developers.shopware.com/assets/js/jquery.api-badge-copy-button.js?v=1641314067"></script>


<script id="usercentrics-cmp" data-settings-id="65ynhGFvE" src="https://app.usercentrics.eu/browser-ui/latest/bundle.js" defer></script>
<style id="usercentrics-styles">
    [data-testid="uc-container"] {
        --font-family: 'Brandon Text', 'Brandon', 'Arial', sans-serif;
        --primary-color: #189eff;
        --primary-color-fade: #189eff11;
        --primary-color-fade-hover: #189eff22;
        --border-color: #60718244;
        --icon-color: #607182bb;
        --text-color: #607182;
        --link-color: #142432cc;
        --headline-color: #142432;
        --bg-color: #f8f9fd;
    }

    /* Modal
    ----------------------------------- */
    .modal,
    [data-testid="uc-default-wall"] {
        padding: 20px 20px 15px;
        border: none;
        max-width: 700px;
        box-shadow: 0 40px 100px rgba(0,0,0,0.2);
    }
    .modal-overlay,
    [data-testid="uc-container"] > div:first-of-type {
        background: rgba(20,36,50,0.8);
        opacity: 1;
    }

    /* Head
    ----------------------------------- */
    .logo,
    [data-testid="uc-header"] > div:first-of-type > div {
        height: 38px;
        max-height: 38px;
    }
    .logo-spacer,
    [data-testid="uc-header"] > div:nth-child(2) {
        height: 36px;
    }

    /* Language Button
    ----------------------------------- */
    .language-button,
    [data-testid="uc-language-container"] [data-testid="uc-language-button"] {
        border-radius: 4px 4px 0 0;
        border-color: var(--border-color, #60718244);
    }
    .language-button:last-child,
    [data-testid="uc-language-container"] [data-testid="uc-language-button"]:last-child {
        border-radius: 4px;
    }
    .language-text,
    [data-testid="uc-language-button"] > div {
        padding-left: 5px;
        padding-right: 14px;
        font-weight: 500;
        font-family: var(--font-family);
        color: var(--text-color, #607182);
    }
    .language-arrow,
    [data-testid="uc-language-button"] > i {
        border-width: 0 1px 1px 0;
        border-color: var(--icon-color, #607182bb);
        padding: 3px;
    }
    .language-dropdown,
    [data-testid="uc-language-container"] [data-testid="uc-language-menu"] {
        border-radius: 0 0 4px 4px;
        border: solid var(--border-color, #60718244);
        border-width: 0 1px 1px 1px;
        box-shadow: unset;
    }
    .language-dropdown-item,
    [data-testid="uc-language-container"] [data-testid="uc-language-menu-item"] {
        font-weight: 500;
        font-family: var(--font-family);
        color: #607182AA;
        border-width: 1px 0 0 0;
        border-color: var(--border-color, #60718244);
        transition: unset !important;
    }
    .language-dropdown-item:first-child,
    [data-testid="uc-language-container"] [data-testid="uc-language-menu-item"]:first-child {
        border-top: 0;
    }
    .language-dropdown-item:hover,
    [data-testid="uc-language-container"] [data-testid="uc-language-menu-item"]:hover {
        background-color: var(--primary-color-fade, #189eff11);
        color: var(--primary-color, #189eff);
    }

    /* Text
    ----------------------------------- */
    .headline,
    [data-testid="uc-header"] > h1 {
        margin-bottom: 8px;
        font-size: 18px;
        font-weight: 600;
        color: var(--headline-color, #142432);
    }
    .description,
    [data-testid="uc-header"] div:nth-of-type(4) {
        font-weight: 400;
        line-height: 1.72;
        color: var(--text-color, #607182);
    }
    .text-spacer,
    [data-testid="uc-header"] div:nth-of-type(6) {
        height: 20px;
    }

    /* Anchor Link
    ----------------------------------- */
    .anchor-link,
    [data-testid="uc-container"] [data-testid="uc-customize-anchor"],
    [data-testid="uc-container"] [data-testid="uc-anchors"] [data-testid="uc-anchor-link"],
    .settings-link,
    [data-testid="uc-container"] [data-testid="uc-customize-anchor"] a {
        padding-top: 0;
        font-size: 14px;
        font-weight: 500;
        color: var(--link-color, #142432cc);
        transition: unset;
    }
    .anchor-link:hover,
    [data-testid="uc-container"] [data-testid="uc-anchors"] [data-testid="uc-anchor-link"]:hover,
    .settings-link,
    [data-testid="uc-container"] [data-testid="uc-customize-anchor"]:hover a {
        text-decoration: underline;
        color: var(--primary-color, #189eff);
    }
    .anchor-link-icon,
    [data-testid="uc-container"] [data-testid="uc-anchors"] [data-testid="uc-anchor-link"] > i,
    .settings-link,
    [data-testid="uc-container"] [data-testid="uc-customize-anchor"] > i {
        display: none;
    }
    .anchor-link,
    [data-testid="uc-container"] [data-testid="uc-anchors"] [data-testid="uc-anchor-link"] {
        margin-right: 14px;
        padding-right: 14px;
        border-right: 1px solid var(--border-color, #60718244);
    }

    /* Button
    ----------------------------------- */
    .button-accept-all,
    [data-testid="uc-container"] [data-testid="uc-accept-all-button"] {
        padding: 16px;
        font-size: 16px;
        font-weight: 500;
        letter-spacing: 0.02em;
        color: #fff;
    }
    .button-save-settings,
    [data-testid="uc-container"] [data-testid="uc-save-button"] {
        padding: 16px;
        font-size: 16px;
        font-weight: 500;
        letter-spacing: 0.02em;
        background-color: var(--primary-color-fade, #189eff11);
        color: var(--primary-color, #189eff);
    }
    .button-save-settings:hover,
    [data-testid="uc-container"] [data-testid="uc-save-button"]:hover {
        background-color: var(--primary-color-fade-hover, #189eff22);
        color: var(--primary-color, #189eff);
    }

    /* More Settings :: Tabs
    ----------------------------------- */
    .tabs,
    [data-testid="uc-container"]  [data-testid="uc-tabs"] [aria-label="SettingsTabs"] {
        border-bottom: 1px solid #ececec;
    }
    .tab,
    [data-testid="uc-container"] [data-testid="uc-tabs"] [data-testid="uc-tab-categories"],
    [data-testid="uc-container"] [data-testid="uc-tabs"] [data-testid="uc-tab-services"] {
        padding: 8px 0 16px;
        position: relative;
        top: 1px;
        font-weight: 500;
        background: none;
        color: var(--text-color, #607182);
    }
    .tab,
    [data-testid="uc-container"] [data-testid="uc-tabs"] [data-testid="uc-tab-categories"][aria-selected="true"],
    [data-testid="uc-container"] [data-testid="uc-tabs"] [data-testid="uc-tab-services"][aria-selected="true"] {
        padding: 8px 0 16px;
        font-weight: 600;
        color: var(--primary-color, #189eff);
    }

    /* More Settings :: Panels
    ----------------------------------- */
    .panel-list,
    [data-testid="uc-container"] [data-testid="uc-panel-categories"],
    [data-testid="uc-container"] [data-testid="uc-panel-services"] {
        background-color: var(--bg-color, #f8f9fd);
    }
    .panel-box,
    [data-testid="uc-container"] [data-testid="uc-expandable-card"] {
        padding: 20px;
    }
    .panel-box-border,
    [data-testid="uc-container"] [data-testid="uc-expandable-card"] button {
        border-bottom: none;
    }
    .panel-headline,
    [data-testid="uc-container"] [data-testid="uc-expandable-card"] button > div:first-of-type {
        color: var(--headline-color, #142432);
        font-weight: 500;
        font-size: 16px;
    }
    .panel-description,
    [data-testid="uc-container"] [data-testid="uc-expandable-card"] button > div:nth-of-type(2) {
        margin-top: 12px;
        color: var(--text-color, #607182);
        line-height: 1.62;
    }
    .panel-expandable-box,
    [data-testid="uc-container"] [data-testid="uc-panel-categories"] [data-testid="uc-expandable-card"],
    [data-testid="uc-container"] [data-testid="uc-panel-services"] [data-testid="uc-expandable-card"] {
        border: 1px solid var(--border-color, #60718244);
        box-shadow: none;
        overflow: hidden;
        border-radius: 4px;
    }
    .panel-expandable-label,
    [data-testid="uc-container"] [data-testid="uc-expandable-content"] label {
        margin-left: 10px;
        font-size: 14px;
        font-weight: 500;
        color: var(--text-color, #607182);
    }

    /* Footer
    ----------------------------------- */
    .footer,
    [data-testid="uc-container"] footer {
        border-top: none;
    }
    .powered-by,
    [data-testid="uc-container"] footer [data-testid="uc-footer"] > div:nth-of-type(2) {
        font-size: 11px;
        letter-spacing: 0.01em;
        color: var(--text-color, #607182);
        opacity: .75;
    }
    .tabs-footer,
    [data-testid="uc-container"] [data-testid="uc-default-settings"] > div:first-of-type {
        border-bottom: 1px solid #ececec;
    }
</style>

<script>
    // Inject styles
    $(document).ready(function() {
        const user = document.getElementById('usercentrics-root');
        const styles = document.getElementById('usercentrics-styles');
        user.shadowRoot.append(styles);
    });

    // Function to open consent modal
    const consentButton = document.getElementById('show-consent');
    if (consentButton) {
        consentButton.addEventListener('click', function(){
            UC_UI.showSecondLayer();
        });
    }

    let userCentricsCalls = 0;
    let userCentrics = null;
    window.addEventListener('ucEvent', function(e) {
        if (e.detail.event === 'consent_status' && userCentricsCalls <= 0) {
            userCentrics = e.detail;
        }
        if (userCentrics !== e.detail && userCentricsCalls <= 1) {
            location.reload();
        }
        userCentricsCalls++;
    });
</script>

<!-- Google Tag Manager -->
<script type="text/plain" data-usercentrics="Google Tag Manager">(function (w, d, s, l, i) {
    w[l] = w[l] || [];
    w[l].push({
        'gtm.start': new Date().getTime(), event: 'gtm.js'
    });
    var f = d.getElementsByTagName(s)[0],
            j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : '';
    j.async = true;
    j.src =
            '//www.googletagmanager.com/gtm.js?id=' + i + dl;
    f.parentNode.insertBefore(j, f);
})(window, document, 'script', 'dataLayer', 'GTM-WJKMNPS');</script>
<!-- End Google Tag Manager -->

</body>
</html>